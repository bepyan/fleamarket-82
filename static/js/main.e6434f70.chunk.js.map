{"version":3,"sources":["lib/image/noimg.png","firebase/firebase.js","store/ip.js","lib/image/profile.png","container/chat/ChatContent.js","container/contract/Contract.js","container/chat/ChatRoom.js","container/chat/Chat.js","container/user/schoolinfo.js","container/user/schoolDetails.js","container/user/schooltest.js","App.js","components/Header.js","lib/image/test23.png","lib/image/test24.png","components/Footer.js","components/Action.js","firebase/getImageUrls.js","container/board/Progress.js","container/board/ImageUpload.js","container/board/UploadBoard.js","container/home/Filter.js","container/home/Search.js","container/board/BoardDetail.js","container/board/BoardThum.js","container/board/Board.js","components/FleamarketHome.js","container/user/Login.js","container/user/Register.js","components/FleamarketLogin.js","container/myPage/dialogtest.js","container/myPage/profile.js","components/FleamarketMyPage.js","container/home/Alert.js","container/user/school2.csv","serviceWorker.js","index.js","store/store.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","firestore","ip","ChatContent","props","user_id","message","messagesEndRef","useRef","useEffect","current","scrollIntoView","behavior","block","inline","showTime","nowDate","moment","format","time","sendTime","slice","contents","type","style","fontWeight","marginTop","maxWidth","maxHeight","src","onClick","window","open","isMine","className","join","ref","renderMsg","Conteact","partypeopleABI","useRoom","room","ViewType","chatlog","useState","stage","setstage","tradeNum","settradeNum","stage_str","setstage_str","trade","settrade","sellerAddress","setsellerAddress","buyerAddress","setbuyerAddress","price","setprice","web3","setWeb3","undefined","Contract","setContract","setopen","Click","setClick","level","setLevel","board","setboard","chat","setchat","initWeb3","getLevel","getContract","axios","get","params","chat_id","id","board_id","then","data","TradeData","getInfo","catch","err","boardData","a","ethereum","Web3","enable","currentProvider","console","log","eth","methods","getBuyerAddress","call","buyerAddress_b32","getSellerAddress","sellerAddress_b32","getstate","Stage","getprice","fee","tempfee","Math","ceil","updatestate","state","res","alert","setUserLevel","buyerrequest","contract","buyer_id","seller_id","post","sendMessage","sellerapprove","getAccounts","accounts","sellerId32","ethers","utils","formatBytes32String","buyerId32","board_price","price_str","String","send","from","buyproduct","cost","value","returnprice","refundrequest","refundapprove","buyercancle","cancle","sellercancle","room_state","sessionStorage","getItem","result","fontSize","Button","size","Dialog","onClose","DialogTitle","align","textAlign","width","DialogContent","height","Tooltip","title","placement","IconButton","marginLeft","color","float","Typography","gutterBottom","margin","marginRight","display","useStyles","makeStyles","theme","root","flexGrow","background","borderBottom","paper","padding","spacing","palette","text","secondary","icon","input","ChatRoom","setRoom","setRead","setText","setChatlog","other_user","setOtherUser","classes","getChatlog","setOther","getChatlogTime","logData","calcTime","id1","st1","id2","st2","parseInt","Date","hiddenFileInput","React","updateChatlog","copy","concat","push","url","sendClick","Number","prototype","this","reg","n","test","replace","exitRoom","confirm","Grid","container","direction","justify","alignItems","item","xs","borderTop","marginBottom","Avatar","alt","images","sm","overflow","textOverflow","whiteSpace","overflowX","map","idx","key","InputBase","onChange","e","target","substring","paddingLeft","inputProps","fullWidth","multiline","rows","autoFocus","placeholder","rowsMax","onKeyPress","click","accept","files","img","name","put","on","snapshot","child","getDownloadURL","backgroundColor","notification","borderRadius","font","chatlist","border","chatroom","Chat","roomList","setRoomList","view","setView","getRooms","chats","renderLists","updateRead","showRoomTitle","updateTime","unread","ToggleButtonGroup","orientation","exclusive","event","nextView","ToggleButton","List","length","new_msg","i","list","splice","unshift","schoolinfo","isSelected","school","address","schoolDetails","defaultProps","MyButton","styled","Schooltest","setOpen","setschool","schoolkey","setschoolkey","selectedKey","setselectedKey","emailkey","setemailkey","codekey","setcodekey","iscodekey","setiscodekey","Matchcode","setMatchcode","SearchNum","setSearchNum","getcsv","csvFilePath","require","parse","header","download","skipEmptyLines","complete","updateData","handleClose","SendSchool","variant","Divider","action","method","sort","b","filter","toLowerCase","indexOf","number","mapToComponents","marginleft","lineHeight","email","paddingRight","random","toString","substr","timer","clearTimeout","setTimeout","hot","logged","setLogged","openChat","setOpenChat","onLogin","Provider","onLogout","clear","basename","maxSnack","useChat","exact","path","component","Home","Login","MyPage","backImg","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","position","zIndex","logo","cursor","paddingTop","withRouter","enqueueSnackbar","useSnackbar","history","location","pathname","reload","logo_Image","Consumer","store","logout","to","getImageUrls","imgAry","setLoading","setImgUrls","urls","forEach","file","route","toLocaleTimeString","uploadTask","bytesTransferred","totalBytes","downloadURL","BorderLinearProgress","withStyles","colorPrimary","grey","bar","LinearProgress","Progress","ImageUpload","imageBoxStyle","imageStyle","resize","useImgAry","setImgAry","useImgBase64Ary","imgBase64Ary","setImgBase64Ary","justifyContent","multiple","Array","reader","FileReader","readAsDataURL","onloadend","base64","arr","image","Zoom","in","timeout","fileArr","deleteImg","deleteNewImg","setTitle","setPrice","setContents","imgUrls","loading","alertOption","setAlertOption","contentAlert","reset","submit","body","status","setOpenUL","getBoards","Paper","elevation","TextField","label","Input","labelwidth","startAdornment","InputAdornment","Alert","option","DialogContentText","disabled","loginAlert","doAfter","noSchoolAlert","useType","setType","useAlign","setAlign","useDesc","desc","setDesc","useSchool","mySchoolText","setMySchoolText","viewMySchool","setViewMySchool","useViewNoContract","viewNoContract","setViewNoContract","newType","FormControlLabel","control","Switch","checked","newAlign","Search","useWord","word","setWord","anchorEl","setAnchorEl","hotList","setHotList","openHot","Boolean","popper_id","showKeywords","setShowKeywords","keywords","setKeywords","searchHit","getHotList","limit","gets","searches","clickKeyword","search","getKeywords","onSubmit","preventDefault","invaild","keyword","Fade","currentTarget","clickHot","Popper","transition","TransitionProps","ListItem","button","ListItemText","primary","Chip","onDelete","deleteKeyword","useOpen","useBoard","oriImgAry","split","fullImg","setFullImg","openImgModal","setOpenImgModal","responseTmp","setResPonseTmp","getSellerInfo","tmp","edit","setEdit","useWish","wish","setWish","openDialog","setOpenDialog","responseRate","preEditBoard","vaild","isImgChange","isNewImage","tmpUrls","editBoard","imgChange","BoardAction","isWish","wishBoard","creatChat","scroll","readOnly","levelColor","lv","myLevel","priceChange","dividers","minWidth","minHeight","tabIndex","rowsMin","index","bottom","left","right","top","DialogActions","getWish","CardActionArea","hit","Card","CardMedia","noimg","CardContent","flex","noWrap","boardState","past","printPast","editDateTime","boards","renderBoards","Grow","md","start_idx","openUL","setBoards","SetSchool","arg","options","cnt","prop","clickUL","clickMyPage","Collapse","UploadBoard","setId","password","setPassword","setMessage","response","success","setItem","nickname","Container","noValidate","inputAlert","registAlert","pw","setPw","rpw","setRpw","phone","setPhone","setName","birth","setBirth","setSchool","setAddress","nickName","setNickName","checkRpw","setCheckRpw","newUser","checkID","required","checkPassword","checkRepassword","error","helperText","v","num","checkPhoneNumber","checkBirth","CenterDialog","Open","setNickname","deleteValid","setDeleteValid","getUserInfo","deleteUserInfoValid","userData","count","deleteUserInfo","deleteUserBoard","deleteUser","defaultProfileImage","onInput","refresh","CenterBox","Box","CenterTable","Table","FlexBox","flexDirection","NavyTypography","SizeLinearProgress","setResponseRate","allMysellList","setAllMysellList","mysellvisibility","setMysellvisibility","myselldisplay","setMyselldisplay","allMybuyList","setAllMybuyList","mybuyvisibility","setMybuyvisibility","mybuydisplay","setMybuydisplay","allMywishList","setAllMywishList","mywishvisibility","setMywishvisibility","mywishdisplay","setMywishdisplay","menu","setMenu","getMysell","getMybuy","getMywish","conState","isNull","selectedValue","visibility","stickyHeader","TableHead","TableRow","TableCell","TableBody","c","row","contractDate","Transition","forwardRef","TransitionComponent","keepMounted","hostname","match","ReactDOM","render","App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","Store","createContext"],"mappings":"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","file":"static/js/main.e6434f70.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQMAAADCCAMAAAB6zFdcAAAAOVBMVEXd3d3g4OCOjo7b29uoqKiRkZGioqKUlJS+vr7ExMSlpaW1tbXHx8exsbHU1NTMzMycnJzQ0NCtra0jU8DMAAADVUlEQVR4nO3YXXujKhSGYQEBERX0///YWQu0zbST2T3YnSS9nvsgjYHY8IbPDAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3GPMoz/B93Lu87MPyjr9ow/zECbP49aflpDvVFptvBfPT2BGa8f+bLHjnZamu+n8CGb00Rcd7n/JYPjJveDMoGob3zMw6vda7dJcJbcVzKeLawb9fJsnJWNhrX4yNxlseQ5z3m4q7dMij2XapzmM02DSEeap57VL5XCUXq+sQcr3KbWrZQxh3V8gBckgJx+3twzM5G0M0fr3pcBMNrjBHFZLvD2ytfJn1qLdykvVthCHybby2Ip0oqlSkp4/BM3ABLuaMwOTvF83tx2+zxKtzmRnKVm9Pza3RO9rcXtsrdtDcs5lq6NJXhr7OzWDycbUSra//fun0DIoNhbTM3DBjq3tc/+iW50rg6gXq7fSwU22RyvTUTTEWPSV6qTAVc1gq1b7htxuevqO0DIYDmlwz2DTOIY2MuJ+1Tkz0N7SBoa+lvqSaga3bVuVumbWO+mOQ29WfN10TpzOlfeZ9Qy2aJeWgTycndfFuJzf4FsGuWegHeDMwMg0WGP0mkG1bezLaJq1Vl1Fnn19VNO+rGfQ+vGVQZ/wpUunOxmsw1sGMoHWsOaoGcQzg6VnEGsXHtW0L+sZyPD1uWgG6W0Su98P3jPYog+bzAm194Ppth/M2+lRTfuyMwP58vz0cT64Pv3dDFpiOvO1sbDqCiqCZlB6yUs4M9BPXn1fF9Z2fdjwcW38UwahbSna/Fm8z7JMZN/Xhb5nGF4giCsDU2Td7/sDmzejq/zy3xnIoipbqSRzou4UZY8UVtkWaQYyw/jkjCvp+c8a14qmB2Rt6SDfo0xztTXuqtP3iWcG+WY+cKP1ofp4TocpxBjHuVWQjuXlPv4V9kgpL/2Zy7nt83W5CyGXm068Zw1kye1YUPob9lbbyQkirCVl3UvIdkBmwGtBcUnOC+F4gX5w8zPZdcqTbc/HX5TM7dB+Oxa2R617vjOlzbkSzqnxvM8LzAf/I9ke6/nJ1lc4K36XRc/R4yt0/u9jzMv8bAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPBP/QJjhBqSKPIs1AAAAABJRU5ErkJggg==\"","import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\n\r\n// Initialize Firebase\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBHulJa9fPwlqWpNGvjPVdu385ey-4W99E\",\r\n  authDomain: \"partypeople-66b7a.firebaseapp.com\",\r\n  databaseURL: \"https://partypeople-66b7a.firebaseio.com\",\r\n  projectId: \"partypeople-66b7a\",\r\n  storageBucket: \"partypeople-66b7a.appspot.com\",\r\n  messagingSenderId: \"561711905554\",\r\n  appId: \"1:561711905554:web:0ca082bf9f36275c2211cb\",\r\n  measurementId: \"G-KBZ5PF6QY6\"\r\n};\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst storage = firebase.storage();\r\nconst database = firebase.firestore();\r\n\r\nexport {\r\n    storage, database, firebase as default\r\n}\r\n","export const ip = \"https://fleamarket-82.herokuapp.com\";\r\n//export const ip = \"http://localhost:3001\";","module.exports = __webpack_public_path__ + \"static/media/profile.499536a0.png\";","import React, { useEffect, useRef } from 'react';\r\nimport './Message.css'\r\nimport moment from 'moment';\r\n\r\nfunction ChatContent(props) {\r\n    const user_id = props.user_id\r\n    const message = props.message\r\n    const messagesEndRef = useRef(null)\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current.scrollIntoView({\r\n            behavior: \"smooth\",\r\n            block: \"nearest\",\r\n            inline: \"start\"\r\n        })\r\n    }\r\n    useEffect(scrollToBottom, message)\r\n\r\n    const showTime = () => {\r\n        const nowDate = moment().format('YYYY-MM-DD');\r\n        //var time = message.sendTime.replace(/T/, ' ').replace(/\\..+/, '')\r\n        var time = message.sendTime\r\n\r\n        if (nowDate === time.slice(0, 10)) {\r\n            return time.slice(11, 16)\r\n        } else {\r\n            return time\r\n        }\r\n    }\r\n\r\n    const contents = (message) => {\r\n        switch(message.type){\r\n            // 일반 채팅\r\n            case 0:\r\n                return <div>\r\n                    {message.contents}\r\n                </div>\r\n\r\n                \r\n            // 구매 요청\r\n            case 1:\r\n                return <div>\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[구매요청]</span> 했습니다. </p>\r\n                    <p style={{marginTop: '5px'}}> 판매자는 '구매승인'을 눌러주세요!  </p>\r\n                </div>\r\n            // 구매 수락\r\n            case 2:\r\n                return <div>\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[구매수락]</span> 했습니다 </p>\r\n                    <p style={{marginTop: '5px'}}> 구매자는 '구매(송금)' 눌러주세요! </p>\r\n                </div>\r\n              // 물품 구매\r\n              case 3:\r\n                return(<div  >\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[물품구매]</span> 하셨습니다. </p>\r\n                    <p style={{marginTop: '5px'}}> 구매자는 물품을 확인하시고 '구매확정' 눌러주세요! </p>\r\n                </div>)\r\n                 // 구매 확정\r\n            case 4:\r\n                return(<div >\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[구매확정]</span> 했습니다 </p>\r\n                    <p style={{marginTop: '5px'}}> 구매자는 환불 여부를 결정해주세요! </p>\r\n                </div>)\r\n                 // 반품 요청\r\n                   //상대방이 방을 나감\r\n            case 9:\r\n                return <div>\r\n                    <p>{message.user_id}님이 방을 나갔습니다.</p>\r\n                </div>\r\n\r\n\r\n            case 10:\r\n                return(<div >\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[반품요청]</span> 했습니다 </p>\r\n                    <p style={{marginTop: '5px'}}> 판매자는 환불 여부를 결정해주세요! </p>\r\n                </div>)\r\n                // 반품 승인\r\n            case 11:\r\n                return(<div >\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[반품승인]</span> 했습니다 </p>\r\n                    <p style={{marginTop: '5px'}}> 물품이 반품처리 되었습니다! </p>\r\n                </div>)\r\n\r\n            case 7:\r\n                return(<div >\r\n                    <p> {message.user_id}님이 <span style={{fontWeight: 'bold'}}>[구매취소]</span> 했습니다 </p>\r\n                    <p style={{marginTop: '5px'}}> 거래가 취소 되었습니다! </p>\r\n                </div>)\r\n           case 21:\r\n            return(<div  >\r\n                <h4> 메타마스크 처리 중 </h4>\r\n                <p style={{marginTop: '5px'}}> please wait ... </p>\r\n            </div>) \r\n                \r\n            case 20:\r\n                return (<img style={{maxWidth: '150px', maxHeight: '150px'}} \r\n                src={message.contents} onClick={() => { window.open(message.contents) }} />)\r\n        }\r\n    }\r\n    const renderMsg = () => {\r\n        var article = <div ref={messagesEndRef} />;\r\n        var isMine = false;\r\n        if (user_id === message.user_id) {\r\n            isMine = true;\r\n        }\r\n        /* message.type === 0 || message.type === 20 */\r\n        if (message.type === 0 || message.type === 20) {\r\n            article = <div className={[\r\n                'message',\r\n                `${isMine ? 'mine' : ''}`, 'start', 'end'\r\n            ].join(' ')}\r\n            >\r\n                <div className=\"bubble-container\">\r\n                    <div className=\"bubble\">\r\n                        {contents(message)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"timestamp\">\r\n                    {showTime()}\r\n                </div>\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n        } else {\r\n            article =\r\n                <div className={[\r\n                    'message',\r\n                    `${isMine ? 'mine' : ''}`, 'start', 'end'\r\n                ].join(' ')}>\r\n                    <div className=\"system-container\">\r\n                        <div className=\"system\">\r\n                            {contents(message)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"timestamp\">\r\n                        {showTime()}\r\n                    </div>\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n        }\r\n\r\n        return article\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {renderMsg()}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChatContent\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport Web3 from 'web3';\r\nimport axios from 'axios';\r\nimport {ip} from \"../../store/ip\"\r\nimport ethers from 'ethers';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogTitle,IconButton, DialogContent, Typography,Tooltip } from '@material-ui/core'\r\n\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport SupervisedUserCircleIcon from '@material-ui/icons/SupervisedUserCircle';\r\n\r\n\r\nfunction Conteact(props) {\r\n  \r\n const partypeopleAddress='0x6de658f56af984c42780551620e5c60b3f4c0b5c';\r\n const partypeopleABI=[ { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" } ], \"name\": \"buyproduct\", \"outputs\": [], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" } ], \"name\": \"cancle\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" }, { \"name\": \"_sellerid\", \"type\": \"bytes32\" }, { \"name\": \"_buyerid\", \"type\": \"bytes32\" }, { \"name\": \"_price\", \"type\": \"uint256\" } ], \"name\": \"createContract\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" } ], \"name\": \"refundapprove\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" } ], \"name\": \"refundrequest\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" } ], \"name\": \"returnprice\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_contractId\", \"type\": \"uint256\" }, { \"name\": \"_sellerid\", \"type\": \"bytes32\" }, { \"name\": \"_buyerid\", \"type\": \"bytes32\" }, { \"name\": \"_price\", \"type\": \"uint256\" } ], \"name\": \"sellerapprove\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"name\": \"contractInfo\", \"outputs\": [ { \"name\": \"contractId\", \"type\": \"uint256\" }, { \"name\": \"buyerAddress\", \"type\": \"address\" }, { \"name\": \"sellerAddress\", \"type\": \"address\" }, { \"name\": \"buyerid\", \"type\": \"bytes32\" }, { \"name\": \"sellerid\", \"type\": \"bytes32\" }, { \"name\": \"price\", \"type\": \"uint256\" }, { \"name\": \"state\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getBuyerAddress\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getBuyerID\", \"outputs\": [ { \"name\": \"\", \"type\": \"bytes32\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getContractId\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getContractInfo\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" }, { \"name\": \"\", \"type\": \"address\" }, { \"name\": \"\", \"type\": \"bytes32\" }, { \"name\": \"\", \"type\": \"bytes32\" }, { \"name\": \"\", \"type\": \"uint256\" }, { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getprice\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getSellerAddress\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getSellerID\", \"outputs\": [ { \"name\": \"\", \"type\": \"bytes32\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_id\", \"type\": \"uint256\" } ], \"name\": \"getstate\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" } ]\r\n  \r\n const [room, setRoom] = props.useRoom\r\n  const ViewType=props.ViewType\r\n  const [chatlog, setChatlog]=props.chatlog\r\n\r\n  const [stage, setstage] = useState(\"0\")\r\n  const [tradeNum,settradeNum]=useState(\"\")\r\n  const [stage_str,setstage_str]=useState(\"\")\r\n  const [trade,settrade]=useState([])\r\n  const[sellerAddress,setsellerAddress]=useState(\"\")\r\n  const[buyerAddress,setbuyerAddress]=useState(\"\")\r\n  const[price,setprice]=useState(\"\")\r\n  const [web3, setWeb3] = useState(\"\");\r\n  const [Contract, setContract] = useState(undefined);\r\n  const[open,setopen]=useState(false)  \r\n  const [Click,setClick]=useState(-1)\r\n  const [level, setLevel] = useState(\"\")\r\n  const [board,setboard]=useState([])\r\n  const [chat,setchat]=useState([])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    initWeb3();\r\n    getLevel();\r\n  },[chatlog,room,stage]) \r\n\r\n\r\n \r\n\r\n /*DB 거래 정보 가져오기 */ \r\n const getContract = (Contract) =>{\r\n  axios\r\n  .get(ip+\"/contract/user\", { \r\n    params: { chat_id:room.id,board_id:room.board_id},})\r\n  .then((data) => {\r\n      const TradeData = data.data[0];\r\n      settradeNum(TradeData[0].id)\r\n      settrade(TradeData[0])\r\n      getInfo(Contract,TradeData[0].id,web3)\r\n    })\r\n    .catch(err => \r\n      {settradeNum(\"0\")\r\n       getInfo(Contract,0,web3)\r\n    })\r\n\r\n    axios\r\n    .get(ip+\"/contract/board\", { \r\n      params: { board_id:room.board_id ,chat_id:room.id},})\r\n    .then((data) => {\r\n        const boardData = data.data[0];\r\n        setboard(boardData[0][0])\r\n        setchat(boardData[1][0])\r\n\r\n      })\r\n    \r\n}\r\n\r\n\r\n  \r\n  /*컨트렉트 주소,ABI연결*/\r\n  const initWeb3 =async ()=>{ \r\n     let web3=undefined;\r\n     let Contract=undefined;\r\n  \r\n    if(window.ethereum){\r\n      web3 =new Web3(window.ethereum);\r\n      try{await window.ethereum.enable();}catch(error){}}\r\n      else if(window.web3){\r\n          web3=new Web3(Web3.currentProvider); }\r\n             else{console.log('Non-Ethereum browser detected. You should consider trying MetaMask'); }\r\n    Contract=new web3.eth.Contract(partypeopleABI,partypeopleAddress); \r\n    getContract(Contract)\r\n    setContract(Contract)\r\n    setWeb3(web3)\r\n    }\r\n\r\n  /*거래 정보 보여줌*/\r\n   const getInfo = async (Contract,tradeNum) =>{ \r\n  \r\n\r\n    const buyerAddress_b32 = await Contract.methods.getBuyerAddress(tradeNum).call()\r\n    const sellerAddress_b32 = await Contract.methods.getSellerAddress(tradeNum).call()\r\n    const Stage=await Contract.methods.getstate(tradeNum).call();\r\n    const fee =await Contract.methods.getprice(tradeNum).call() \r\n    const tempfee= Math.ceil((fee/(0.0000227* 10 ** 18)))\r\n\r\n  \r\n    \r\n    let stage_str;\r\n\r\n    if(Stage === \"1\") {stage_str = \"구매요청 이후 구매승인대기\"}\r\n    if(Stage === \"2\") {stage_str = \"구매승인 이후 입금대기\"}\r\n    if(Stage === \"3\") {stage_str = \"입금 이후 구매확정대기\"}\r\n    if(Stage === \"4\") {stage_str = \"구매 확정 완료[판매 완료]\"}\r\n    if(Stage === \"10\") {stage_str = \"물품 환불 요청 상태[거래취소]\"} //구매자\r\n    if(Stage === \"11\") {stage_str = \"물품 환불 승인 상태[거래취소]\"} //판매자\r\n    if(Stage === \"7\") {stage_str = \"구매 전 [거래 취소]\"}\r\n    \r\n\r\n    setstage(Stage)\r\n    setstage_str(stage_str) \r\n    setsellerAddress(sellerAddress_b32)\r\n    setbuyerAddress(buyerAddress_b32)\r\n    setprice(tempfee)\r\n    }\r\n\r\n  /*DB상태 업데이트 */\r\n  const updatestate = (state) => {\r\n\r\n    axios.get(ip + '/contract/state', { params: { tradeNum: tradeNum, state: state ,board_id:room.board_id } })\r\n      .then(res => { })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"업데이트에러\")\r\n      })\r\n    if (state===4 || state===7){\r\n      setUserLevel(state) //레벨설정\r\n    }\r\n  }\r\n\r\n\r\n\r\n/*구매요청 (DB생성) */\r\n    const buyerrequest= async () => {\r\n      const contract = {  //채팅방 아이디를 추가 구분하기위해 ! \r\n        chat_id:room.id,\r\n        board_id:room.board_id,\r\n        price:board.price,\r\n        buyer_id:room.buyer_id,\r\n        seller_id:room.seller_id};\r\n        axios.post(ip+\"/contract/contract\", { contract }).then((res) => \r\n          {  \r\n             updatestate(1)\r\n             props.sendMessage(1)\r\n             setstage(1)\r\n          });\r\n         \r\n    }\r\n\r\n    \r\n/*판매자 승인*/\r\n  const sellerapprove = async () => { \r\n\r\n  const accounts = await web3.eth.getAccounts();\r\n  setsellerAddress(accounts[0])\r\n\r\n  let sellerId32= ethers.utils.formatBytes32String(room.seller_id);\r\n  let buyerId32= ethers.utils.formatBytes32String(room.buyer_id);\r\n  let board_price = trade.board_price*0.0000227* 10 ** 18; //1원에 0.00000227 이더.. 일단 이렇게\r\n  let price_str = String(board_price) //가격\r\n  \r\n  props.sendMessage(21)\r\n  await Contract.methods.sellerapprove(tradeNum,sellerId32,buyerId32,price_str).send({ from: accounts[0]}); \r\n  await updatestate(2)\r\n  await props.sendMessage(2)\r\n  \r\n\r\n}\r\n\r\n/*물품구매*/\r\nconst buyproduct = async() =>{\r\n\r\n  const accounts = await web3.eth.getAccounts();\r\n  setbuyerAddress(accounts[0])\r\n\r\n  let cost = trade.board_price*0.0000227* 10 ** 18 //원->이더->웨이\r\n  props.sendMessage(21)\r\n  await Contract.methods.buyproduct(tradeNum).send({ from:accounts[0], value: cost}); \r\n  await updatestate(3)\r\n  await props.sendMessage(3) \r\n  \r\n \r\n\r\n}\r\n\r\n\r\n\r\n/*구매확정(구)*/\r\nconst returnprice = async() =>{\r\n \r\nprops.sendMessage(21)\r\nawait Contract.methods.returnprice(tradeNum).send({ from:buyerAddress});\r\nawait updatestate(4)\r\nawait props.sendMessage(4)\r\n\r\n}\r\n\r\n/*물품 환불 요청 상태[거래취소] //구매자*/   \r\n const refundrequest = async() =>{\r\n  \r\n  props.sendMessage(21)\r\n  await Contract.methods.refundrequest(tradeNum).send({from:buyerAddress});\r\n  await updatestate(10)\r\n  await props.sendMessage(10)\r\n\r\n}\r\n\r\n/*물품 환불 승인 상태[거래취소] //구매자*/   \r\n const refundapprove = async() =>{\r\n\r\n  props.sendMessage(21)\r\n  await Contract.methods.refundapprove(tradeNum).send({from:sellerAddress});\r\n  await updatestate(11)\r\n  await  props.sendMessage(11)\r\n\r\n}\r\n\r\n /*구매 취소[구매자]*/\r\n const buyercancle = async() =>{\r\n  \r\n  \r\n  const accounts = await web3.eth.getAccounts();\r\n  setbuyerAddress(accounts[0])\r\n\r\n  props.sendMessage(21)\r\n  await Contract.methods.cancle(tradeNum).send({ from:accounts[0]});\r\n  await updatestate(7)\r\n  await props.sendMessage(7) \r\n  \r\n}\r\n\r\n/*구매 취소[판매자]*/\r\n const sellercancle = async() =>{\r\n  \r\n  props.sendMessage(21)\r\n  await Contract.methods.cancle(tradeNum).send({ from:sellerAddress});\r\n  await updatestate(7)\r\n  await props.sendMessage(7) \r\n\r\n}\r\n\r\n /* 나의레벨 */\r\n const setUserLevel = (state) => {\r\n  if (0 < level && level < 100 && state!==4 && state !== 7){\r\n    axios\r\n      .post(\"/chat/updatelevel\", {\r\n        room_state: state,\r\n        chat_id: room.id\r\n      })\r\n      .catch(err => {\r\n          console.log(err)\r\n          alert(err)\r\n      })\r\n  }\r\n\r\n}\r\n\r\nconst getLevel = () => {\r\n  axios\r\n    .get(ip + \"/mypages/profile\", {\r\n      params: {\r\n        id: window.sessionStorage.getItem(\"id\")\r\n      },\r\n    })\r\n    .then(data => {\r\n      const result = data.data[0]\r\n      setLevel(result.level)\r\n    })\r\n    .catch(err => {\r\n        console.log(err)\r\n        alert(err)\r\n    })\r\n}\r\n\r\n\r\n\r\n    return (\r\n        <div style={{fontSize:30 }}>\r\n              {/* 거래 정보 보여줌 */}\r\n            \r\n    <Button size={\"small\"} type={\"button\"} onClick={()=>setopen(true)} > 거래 정보 </Button>\r\n\r\n              {/* 거래정보 */}\r\n                <Dialog onClose={open} open={open} >\r\n                          <DialogTitle align=\"center\"style={{textAlign:\"center\",fontWeight:\"bold\",width:550 }}></DialogTitle>\r\n                                                          \r\n                                <DialogContent style={{textAlign:\"center\",height:\"350px\"}} >  \r\n                                \r\n                              \r\n                                    <Tooltip title=\"계정정보 보기\" placement='left'> \r\n                                    <IconButton onClick={() => setClick(-Click)} style={{marginLeft:\"45px\",color:\"#FFA500\"}}  >\r\n                                        <SupervisedUserCircleIcon style={{fontSize:80 }}/>\r\n                                   </IconButton>\r\n                                    </Tooltip>\r\n                                    \r\n                                   <IconButton  onClick={() => setopen(false)} style={{color:\"#696969\",float:\"right\"}}  >\r\n                                        <CloseIcon  style={{fontSize: 30}} /> \r\n                                   </IconButton>\r\n\r\n                                  <Typography gutterBottom style={{fontWeight:\"bold\",fontSize:\"25px\",color:\"#000069\",marginTop:\"30px\"}}>{stage_str ===\"0\"?\"구매 요청 전입니다.\" : stage_str}</Typography>\r\n                               \r\n\r\n                                   <IconButton style={{margin:\"auto\",color:\"#000069\"}} >\r\n                                        <MonetizationOnIcon style={{fontSize:35 ,marginRight:\"8px\"}}/>\r\n                                         <Typography gutterBottom style={{fontWeight:\"bold\"}} > {price} / ETH : {price*(0.0000227)} </Typography>\r\n                                   </IconButton>\r\n                                       {Click===1?\r\n                                        (      \r\n                                        <div>\r\n                                          <Typography gutterBottom style={{fontWeight:\"bold\",fontSize:\"15px\"}}>SELLER:{sellerAddress === \"\"? \"판매자 측 거래승인 이후 등록됩니다.\" : sellerAddress}</Typography>\r\n                                          <Typography gutterBottom  style={{fontWeight:\"bold\",fontSize:\"15px\"}}>BUYER :{buyerAddress === \"\"? \"판매자 측 거래승인 이후 등록됩니다.\" : buyerAddress}</Typography>\r\n                                        </div>) :null}\r\n                                           \r\n                                </DialogContent>\r\n                                \r\n                </Dialog>\r\n                {/* 거래정보 */}\r\n               \r\n              {ViewType===1 && chat.state===0 &&(board.state===1||board.state===0||board.state===7||board.state===11) ?<Button size={\"small\"} type={\"button\"} onClick={() => buyerrequest()} >구매 요청</Button>:null}\r\n              {board.state===chat.state?\r\n              <div style={{display:\"inline-block\"}}>\r\n              {ViewType===2 && trade.state===1? <Button size={\"small\"} type={\"button\"} onClick={() => sellerapprove()} >구매 승인</Button>:null}\r\n              {ViewType===1 && stage===\"2\"? <Button size={\"small\"} type={\"button\"}  onClick={() => buyproduct()}>물품 구매</Button>:null}\r\n              {ViewType===1 && stage===\"3\"?<Button size={\"small\"} type={\"button\"}  onClick={() => returnprice()}>구매 확정</Button>:null}\r\n              {ViewType===1 && stage===\"2\"? <Button size={\"small\"} type={\"button\"}  onClick={() => buyercancle()}>구매 취소</Button>:null}\r\n              {ViewType===2 &&stage===\"2\"?<Button size={\"small\"} type={\"button\"}  onClick={() => sellercancle()}>구매 취소</Button>:null}\r\n              {ViewType===1 && stage===\"3\"? <Button size={\"small\"} type={\"button\"} onClick={() => refundrequest()}>물품 환불 요청</Button>:null}\r\n              {ViewType===2 && stage===\"10\"? <Button size={\"small\"} type={\"button\"}  onClick={() => refundapprove()} >물품 환불 승인</Button>:null}\r\n              </div>:null\r\n              }\r\n\r\n              \r\n             \r\n            \r\n        </div>\r\n      \r\n    )\r\n}\r\nexport default Conteact;","import React, { useEffect, useState } from 'react';\r\nimport { ip } from '../../store/ip'\r\nimport axios from 'axios';\r\nimport ChatContent from \"./ChatContent\";\r\nimport { storage } from '../../firebase/firebase'\r\nimport Contract from \"../contract/Contract\"\r\nimport { Grid, IconButton, InputBase, makeStyles } from '@material-ui/core';\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\r\nimport SendOutlinedIcon from '@material-ui/icons/SendOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport CachedRoundedIcon from '@material-ui/icons/CachedRounded';\r\n\r\nimport moment from 'moment';\r\n\r\nconst time = moment().format('YYYY-MM-DD hh:mm:ss');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        background: '#FFF',\r\n        borderBottom:'1px solid gray'\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    icon: {\r\n        fontSize: '20px'\r\n    },\r\n    input: {\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n            width: '25ch',\r\n        },\r\n    }\r\n}));\r\n\r\n\r\nfunction ChatRoom(props) {\r\n    const [room, setRoom] = props.useRoom\r\n    const setRead = props.setRead\r\n    const user_id = window.sessionStorage.getItem('id')\r\n    const [text, setText] = useState(\"\")\r\n    const [chatlog, setChatlog] = useState([])\r\n\r\n    const [other_user, setOtherUser] = useState('');\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        getChatlog()\r\n        setOther()\r\n        setRead(room.id, false)\r\n    }, [room])\r\n\r\n    /* 채팅로그 아이디, 시간 get하는 함수 */\r\n    const getChatlogTime = () => {\r\n        axios\r\n        .get(ip+\"/chat/chatTime\", {\r\n            params : {\r\n                chat_id : room.id\r\n            }\r\n        })\r\n        .then((data)=>{\r\n            const logData = data.data;\r\n            if (logData[1]) {\r\n                calcTime(logData[0].user_id, logData[0].sendTime, logData[1].user_id, logData[1].sendTime)\r\n            }\r\n        })\r\n        .catch(err=>console.log(err))\r\n\r\n    }\r\n    /* 시간계산함수 */\r\n    const calcTime = (id1,st1,id2,st2) => {\r\n        let time = parseInt( (new Date(st1) - new Date(st2) )/1000)\r\n        if (id1 !== id2 && time < 1800) {\r\n            axios\r\n                .post(ip + \"/chat/chatScore\", {\r\n                    user_id: id1\r\n                })\r\n                .then(() => {\r\n                })\r\n                .catch(err => console.log(err))\r\n        }\r\n    }\r\n    \r\n\r\n    const hiddenFileInput = React.useRef(null);\r\n\r\n    const isSeller = (id) => {\r\n        return room.seller_id === id\r\n    }\r\n\r\n    const getChatlog = () => {\r\n        if (!room.id)\r\n            return\r\n\r\n        axios.get(ip + \"/chat/chatlog\", { params: { id: room.id } })\r\n            .then(res => {\r\n                if (chatlog !== res.data.chatlog[0]) {\r\n                    setChatlog(res.data.chatlog[0])\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(err)\r\n            })\r\n    }\r\n    const updateChatlog = (log) => {\r\n        var copy = chatlog.concat()\r\n        copy.push(log)\r\n        setChatlog(copy)\r\n    }\r\n    const clickRefresh = () => {\r\n        getChatlog()\r\n    }\r\n\r\n    // type 0: 일반 메시지 1: 구매요청 2: 구매수락 3: 물품구매 4: 구매확정 5: 거래완료 10: 거래취소\r\n    const sendMessage = (type, url = \"\") => {\r\n        if (!type && !text)\r\n            return\r\n        const log = { chat_id: room.id, user_id: user_id, contents: type ? url : text, type: type, sendTime:time }\r\n        axios.post(ip + \"/chat/chatlog\", log)\r\n            .then(() => {\r\n                //getChatlog()\r\n                updateChatlog(log)\r\n                setText(\"\")\r\n                getChatlogTime()\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(err)\r\n            })\r\n    }\r\n \r\n  \r\n\r\n    // 사진 업로드\r\n    const handleClick = e => {\r\n        hiddenFileInput.current.click();\r\n    };\r\n    const uploadImage = (e) => {\r\n        if (e.target.files[0]) {\r\n            const img = e.target.files[0]\r\n            const uploadTask = storage.ref(`images/${img.name}`).put(img);\r\n            uploadTask.on('state_changed',\r\n                (snapshot) => {\r\n                    console.log(snapshot)\r\n                }, (err) => {\r\n                    console.log(err)\r\n                }, () => {\r\n                    storage.ref('images').child(img.name).getDownloadURL().then(url => {\r\n                        sendMessage(20, url)\r\n                    })\r\n                });\r\n        }\r\n    }\r\n\r\n    // 채팅 enter키로 전송 \r\n    const sendClick = () => {\r\n        sendMessage(0)\r\n    }\r\n    const appKeyPress = (e) => {\r\n        if (e.key === 'Enter') {\r\n            sendClick();\r\n        }\r\n    }\r\n    // 가격에 단위수 마다 ,콤마 찍는 함수\r\n    Number.prototype.format = function () {\r\n        if (this === 0) return 0;\r\n\r\n        var reg = /(^[+-]?\\d+)(\\d{3})/;\r\n        var n = (this + '');\r\n\r\n        while (reg.test(n)) n = n.replace(reg, '$1' + ',' + '$2');\r\n\r\n        return n;\r\n    };\r\n    \r\n    //방제목용 상대방 id표시\r\n    const setOther = () => {\r\n        if (room.seller_id === user_id) {\r\n            setOtherUser(room.buyer_id)\r\n        } else {\r\n            setOtherUser(room.seller_id)\r\n        }\r\n    }\r\n    const showRoomTitle = () => {\r\n        if(other_user === ''){\r\n            return <h3 style={{color:'#cd5c5c'}}>상대방이 나감</h3>\r\n        } else{\r\n            return <h3 style={{color:'#000',fontSize:\"18px\"}}>{other_user}</h3>\r\n        }\r\n    }\r\n    const exitRoom = () => {\r\n        if (room.state === 0 || room.state === 5 || room.state === 10) {\r\n            let result = window.confirm(\"정말 방을 나가시겠습니까?\\n대화내용이 삭제됩니다\")\r\n            if (result) {\r\n                sendMessage(9)\r\n\r\n                var type = isSeller(user_id) ? 'seller' : 'buyer'\r\n                var data = { type: type, id: room.id }\r\n\r\n                axios.post(ip + \"/chat/exit\", data)\r\n                    .then(() => {\r\n                        setRoom({})\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err)\r\n                        alert(err)\r\n                    })\r\n            }\r\n        } else {\r\n            alert('거래 중일 때는 방을 나가실 수 없습니다')\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <header className={classes.root}>\r\n                <Grid container spacing={3} direction=\"row\" justify=\"space-between\" alignItems=\"center\" >\r\n                    <Grid item> \r\n                        <IconButton onClick={() => { setRoom({})  }}>\r\n                            <ArrowBackIcon  style={{fontSize:30 }} />\r\n                        </IconButton>\r\n                    </Grid>\r\n                    <Grid item xs={6} style={{ textAlign: \"center\"}}>\r\n                        {showRoomTitle()}\r\n                    </Grid>\r\n                    <Grid item style={{ float: \"right\" }}>\r\n                        <IconButton size=\"large\" onClick={() => { exitRoom() }}>\r\n                            <ExitToAppIcon style={{fontSize:30 }} />\r\n                        </IconButton>\r\n                    </Grid>\r\n                </Grid>\r\n                <div style={{borderTop:'1px solid gray'}}/>\r\n                <Grid container spacing={1} style={{ marginTop: '5px', marginBottom:'5px' }}>\r\n                    <Grid item>\r\n                        <Avatar alt=\"img\" src={room.images} />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm container>\r\n                        <Grid item xs container direction=\"column\" spacing={0}>\r\n                            <Grid item xs> \r\n                                <h3 style={{ width: \"300px\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>{room.title}</h3>\r\n                            </Grid>\r\n                            <Grid item xs> \r\n                                <div style={{ marginTop: '0px' }}>{room.price.format()}원</div>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid item>\r\n                    </Grid>\r\n                </Grid>\r\n            </header>\r\n\r\n            <div style={{ overflowX: \"auto\", height: \"480px\" ,background:\"#fff\"}}>\r\n                {\r\n                    chatlog.map((message, idx) => {\r\n                        const align = (message.user_id === user_id) ? \"right\" : \"left\"\r\n                        return (\r\n                            <li key={idx} style={{textAlign: align, margin: '1rem' }}>\r\n                                <ChatContent message={message} user_id={user_id} sendMessage={sendMessage} />\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            <Grid container direction={'column'} style={{ borderTop: '1px solid gray' }}>\r\n                <Grid item>\r\n                    {/* Enter하면 바로 메시지 전송하고 Ctrl+Enter로 행바꿈 */}\r\n                    <InputBase onChange={(e) => setText(e.target.value.substring(0,100))}\r\n                        value={text}\r\n                        style={{ paddingLeft: '1rem' }}\r\n                        inputProps={{ 'aria-label': 'naked', size: 'small' }}\r\n                        type=\"text\"\r\n                        fullWidth multiline rows={3}\r\n                        autoFocus\r\n                        placeholder='메시지를 입력하세요 (글자 수 제한 : 100) '\r\n                        rowsMax={5}\r\n                        onKeyPress={appKeyPress} />\r\n                </Grid>\r\n                <div style={{borderTop:'1px solid gray'}}/>\r\n                <Grid item style={{ display: 'flex', direction: 'rtl' }}>\r\n                    <IconButton size=\"small\" onClick={() => sendClick()} >\r\n                        <SendOutlinedIcon style={{fontSize:30 }}/>\r\n                    </IconButton>\r\n                    <div>\r\n                        <IconButton size=\"small\" onClick={handleClick}>\r\n                            <ImageOutlinedIcon style={{fontSize:30 }} />\r\n                            <input accept=\"image/*\" type=\"file\"\r\n                                onChange={uploadImage}\r\n                                ref={hiddenFileInput}\r\n                                style={{ display: 'none' }}\r\n                            />\r\n                        </IconButton >\r\n                    </div>\r\n                    <IconButton size=\"small\" onClick={() => clickRefresh()} style={{marginLeft: '10px'}}>\r\n                        <CachedRoundedIcon style={{fontSize:30 }}/>\r\n                    </IconButton>\r\n                    <Contract useRoom={[room, setRoom]} ViewType={room.buyer_id===user_id?1:2} chatlog={[chatlog, setChatlog]} sendMessage={sendMessage}/>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatRoom;","import React, { useEffect, useState } from 'react'\r\nimport ChatRoom from './ChatRoom'\r\nimport axios from 'axios';\r\nimport { ip } from '../../store/ip'\r\n\r\nimport { Grid, IconButton } from '@material-ui/core';\r\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport AttachMoneyIcon from '@material-ui/icons/AttachMoney';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\r\nimport CachedRoundedIcon from '@material-ui/icons/CachedRounded';\r\nimport moment from 'moment';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        maxWidth: '36ch',\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n    inline: {\r\n        display: 'inline',\r\n    },\r\n    notification: {\r\n        float: 'right',\r\n        borderRadius: '50%',\r\n        padding: '10% 5%',\r\n\r\n        backgroundColor: 'red',\r\n        color: 'white',\r\n        font: 'bold Helvetica, Verdana, Tahoma',\r\n    },\r\n    chatlist: {\r\n        padding: \"1rem\", border: \"1px solid gray\", background: '#FFF', width: '300px', maxHeight: '500px', overflow: \"auto\", borderRadius: '2%'\r\n    },\r\n    chatroom: {\r\n        padding: \"1rem\", border: \"1px solid gray\", background: '#FFF', borderRadius: '2%'\r\n    },\r\n    border: {\r\n        padding: '5px 0px 5px 5px',\r\n        marginBottom: '5px',\r\n        borderBottom: '1px solid #efefef',\r\n    },\r\n    icon: {\r\n        float: 'right',\r\n        fontSize: '27px',\r\n        color: 'red'\r\n    }\r\n}));\r\n\r\nfunction    Chat() {\r\n    const user_id = window.sessionStorage.getItem(\"id\")\r\n    const [room, setRoom] = useState({})\r\n    const [roomList, setRoomList] = useState([])\r\n    const [view, setView] = React.useState('all');\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        getRooms()\r\n    }, [])\r\n\r\n    //새로운 메시지 count\r\n    const setRead = (id, new_msg) => {\r\n        var i = 0;\r\n        var list = roomList.concat()\r\n        while (i < list.length) {\r\n            if (list[i].id === id) {\r\n                if (new_msg === true) {\r\n                    var copy = list[i]\r\n                    copy.unread = copy.unread + 1;\r\n                    copy.updateTime = moment().format('YYYY-MM-DD HH:mm:ss');\r\n                    list.splice(i, 1)\r\n                    list.unshift(copy)\r\n                } else if (new_msg === false) {\r\n                    list[i].unread = 0;\r\n                }\r\n                break;\r\n            }\r\n            i = i + 1;\r\n        }\r\n        setRoomList(list);\r\n    }\r\n\r\n    const updateRoom = (id, type) => {\r\n        var list = roomList.concat()\r\n        if (type === 'exit1') {\r\n            var i = 0;\r\n            while (i < list.length) {\r\n                if (list[i].id === id) {\r\n                    list.splice(i, 1)\r\n                    break;\r\n                }\r\n                i = i + 1;\r\n            }\r\n        } else if (type === 'exit2') {\r\n            i = 0;\r\n            while (i < list.length) {\r\n                if (list[i].id === id) {\r\n                    if (list[i].seller_id === user_id) {\r\n                        list[i].buyer_id = 'out'\r\n                    } else {\r\n                        list[i].seller_id = 'out'\r\n                    }\r\n                    break;\r\n                }\r\n                i = i + 1;\r\n            }\r\n        }\r\n        setRoomList(list);\r\n    }\r\n    //'new_room' 새로운 방 추가 때문에 만듬\r\n    const getNewRoom = (room_id) => {\r\n        axios.get(ip + \"/chat/room\", { params: { id: room_id } })\r\n            .then(res => {\r\n                var list = roomList.concat()\r\n                list.unshift(res.data.room[0])\r\n                setRoomList(list)   \r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(err)\r\n            }) \r\n    }\r\n    // type 'all': 전체  'shopping': 구매  'selling': 판매\r\n    const getRooms = (type = view) => {\r\n        axios.get(ip + \"/chat\", { params: { id: user_id, type: type } })\r\n            .then(res => {\r\n                setRoomList(res.data.chats[0])\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(err)\r\n            })  \r\n    }\r\n    const showRoomTitle = (room) => {\r\n        var other_user = '';\r\n        if (room.seller_id === user_id) {\r\n            other_user = room.buyer_id\r\n        } else {\r\n            other_user = room.seller_id\r\n        }\r\n\r\n        if (other_user === null) {\r\n            return <p style={{ color: \"#cd5c5c\", float: 'left' }}>상대방 나감</p>\r\n        } else {\r\n            return <p style={{ color: \"#556b2f\", float: 'left' }}>{other_user}</p>\r\n        }\r\n    }\r\n    const showTime = (time) => {\r\n        const nowDate = moment().format('YYYY-MM-DD');\r\n\r\n        if (nowDate === time.slice(0, 10)) {\r\n            return time.slice(11, 16)\r\n        } else {\r\n            return time.slice(0, 10)\r\n        }\r\n    }\r\n    // 가격에 단위수 마다 ,콤마 찍는 함수\r\n    Number.prototype.format = function () {\r\n        if (this === 0) return 0;\r\n\r\n        var reg = /(^[+-]?\\d+)(\\d{3})/;\r\n        var n = (this + '');\r\n\r\n        while (reg.test(n)) n = n.replace(reg, '$1' + ',' + '$2');\r\n\r\n        return n;\r\n    };\r\n\r\n    // 채팅방들\r\n    const renderLists = roomList.map((item, idx) => {\r\n        return (\r\n            <Grid container spacing={1} key={idx} onClick={() => { updateRead(item) }} className={classes.border}>\r\n                <Grid item>\r\n                    <Avatar alt=\"img\" src={item.images} />\r\n                </Grid>\r\n                <Grid item xs={12} sm container>\r\n                    <Grid item xs container direction=\"column\" spacing={0}>\r\n                        <Grid item xs> \r\n                            <h3 style={{ width: \"140px\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>{item.title}</h3>\r\n                        </Grid>\r\n                        <Grid item xs> \r\n                            <div>{item.price.format()}원 </div> \r\n                        </Grid>\r\n                        <Grid item xs style={{marginTop: '3px'}}> \r\n                            <div>{showRoomTitle(item)} </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                    <p style={{color:'gray', fontSize:'10px'}}>{showTime(item.updateTime)}</p> \r\n                    {item.unread === 0 ? '' : <NotificationsActiveIcon className={classes.icon} />}\r\n                </Grid>\r\n            </Grid>\r\n        )\r\n    })\r\n\r\n    const updateRead=(item)=>{\r\n        setRoom(room === item ? {} : item)\r\n        var id = {id:item.id}\r\n        axios.post(ip + \"/chat/updateRead\", id)\r\n        .then(res => {\r\n            \r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            alert(err)\r\n        })\r\n    }\r\n\r\n    const toggleChange = (event, nextView) => {\r\n        if (nextView === null)\r\n            return\r\n        getRooms(nextView)\r\n        setView(nextView)\r\n    }\r\n    return (\r\n        <Grid container spacing={3}>\r\n            <Grid item style={{ textAlign: 'center' }}>\r\n                <ToggleButtonGroup orientation=\"vertical\" value={view} exclusive onChange={toggleChange}>\r\n                    <ToggleButton value=\"all\">\r\n                        <h4>전체</h4>\r\n                    </ToggleButton>\r\n                    <ToggleButton value=\"shopping\">\r\n                        <ShoppingCartIcon />\r\n                    </ToggleButton>\r\n                    <ToggleButton value=\"selling\">\r\n                        <AttachMoneyIcon />\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </Grid>\r\n            {/* 채팅방 리스트 */}\r\n            <Grid item>\r\n                <div className={classes.chatlist}>\r\n                    <div style={{display: 'flex'}}>\r\n                        <h2 className={classes.border}>Messenger</h2>\r\n                        <IconButton style={{marginLeft: '140px'}}>\r\n                            <CachedRoundedIcon/>\r\n                        </IconButton>\r\n                    </div>\r\n                    <List className={classes.root}>\r\n                        {roomList.length ? renderLists : <div> 채팅방이 없습니다 </div>}\r\n                    </List>\r\n                </div>\r\n            </Grid>\r\n            {/* 1대1 채팅방 */}\r\n            <Grid item style={{ width: '480px' }}>\r\n                {!(\"id\" in room) ? null :\r\n                    <div className={classes.chatroom}>\r\n                        <ChatRoom useRoom={[room, setRoom]} setRead={setRead}/>\r\n                    </div>\r\n                }\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react';\r\nimport \"../../lib/css/email.css\";\r\n\r\n\r\n\r\nconst schoolinfo=(props)=>{\r\n\r\n    return (\r\n        <div className=\"school_result_view\">\r\n            <ul>\r\n                <li onClick={props.onClick}>{props.isSelected} {props.school.school} </li>\r\n                <li>&nbsp;&nbsp;</li>\r\n                <li onClick={props.onClick}>{props.school.address}  </li>\r\n                \r\n                <br/>\r\n            </ul>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\nexport default schoolinfo;\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\n\r\nconst schoolDetails=(props)=>{\r\n    return(\r\n        <div>\r\n            { props.isSelected ? <p>현재 재학중인 대학교: {props.school.school}</p> : null }\r\n        </div>\r\n    );\r\n}\r\n\r\nschoolDetails.defaultProps={\r\n    school:{\r\n        school:'',\r\n        address:'',\r\n        test:'',\r\n    }\r\n}\r\nexport default schoolDetails;\r\n","import React, { useState,useEffect } from 'react';\r\nimport SchoolInfo from \"./schoolinfo\"\r\nimport SchoolDetail from \"./schoolDetails\"\r\nimport \"../../lib/css/email.css\";\r\nimport \"../../lib/css/common.css\";\r\nimport axios from 'axios';\r\nimport {ip} from \"../../store/ip\"\r\nimport { styled } from '@material-ui/core/styles';\r\nimport SchoolIcon from '@material-ui/icons/School';\r\n\r\nimport {Button,Dialog, Divider, DialogContent, IconButton, Typography} from '@material-ui/core';\r\n\r\n\r\nconst MyButton = styled(Button)({\r\n    background: 'rgb(12, 39, 114)',\r\n    border: 0,\r\n    borderRadius: 3,\r\n    color: 'white',\r\n    height: 48,\r\n    padding: '0 30px',\r\n    fontWeight:'bold',\r\n    width:'552px',\r\n    marginTop:'3px',\r\n  });\r\n\r\n\r\nfunction Schooltest(props) {\r\n\r\n\r\n\r\n    const [open, setOpen] = useState(false)\r\n    const [school, setschool] = useState([]) /* csv파일 load */\r\n    const [schoolkey,setschoolkey] =useState(\"\") \r\n    const [selectedKey,setselectedKey] =useState(-1) /* 학교 선택 */\r\n    const [emailkey,setemailkey]=useState(\"\")\r\n    const [codekey,setcodekey]=useState(0)\r\n    const [iscodekey,setiscodekey]=useState(0)\r\n    const [Matchcode,setMatchcode]=useState(false)\r\n    const [SearchNum,setSearchNum]=useState(-1)\r\n\r\n    useEffect(() => {\r\n     getcsv();\r\n    },[]) \r\n    \r\n\r\n    /*파일로딩 */\r\n    const getcsv =()=>{\r\n      var csvFilePath = require(\"./school2.csv\");\r\n      var Papa = require(\"../../../node_modules/papaparse/papaparse.min.js\");\r\n      Papa.parse(csvFilePath, {\r\n        header:true,\r\n        download: true,\r\n        skipEmptyLines: true,\r\n        complete: updateData\r\n      });\r\n    }\r\n    const updateData = (res) => {\r\n        setschool(res.data)\r\n    }\r\n\r\n    /*랜덤번호 */\r\n    const randcode = () => { \r\n    \r\n    if(emailkey===\"\")  alert(\"이메일을 입력해주세요.\") \r\n    \r\n      const codekey = Math.random().toString().substr(2,6);\r\n      axios.get(ip + '/email', { params: { id: emailkey, email :school[selectedKey].email,codekey: codekey }})\r\n      .then(() => {\r\n        alert(\"이메일이 전송되었습니다.\")\r\n    })\r\n      setcodekey(codekey)  \r\n    }\r\n\r\n\r\n    /*props 학교이름,인증 true false */\r\n    const SendSchool = () => {\r\n            props.SendSchool(school[selectedKey].school);\r\n;\r\n    }\r\n   \r\n    /*코드키 일치하는지 확인 */\r\n    const checkMatchCode = () => {\r\n      let timer;\r\n      if (timer)\r\n        clearTimeout(timer)\r\n      timer = setTimeout(() => {\r\n          if(codekey === iscodekey)\r\n          {\r\n            setMatchcode(true) \r\n            alert(\"일치!\")\r\n          }\r\n          else {\r\n              setMatchcode(false)\r\n              alert(\"불일치!\")\r\n            } \r\n      }, 500);\r\n    }\r\n\r\n\r\n    /*학교이름 출력/클릭 */\r\n    const mapToComponents = (data) => {\r\n        data.sort((a,b) => { return a.name > b.name; })\r\n        data = data.filter( (schoolinfo) => { \r\n            return schoolinfo.school.toLowerCase().indexOf(schoolkey.toLowerCase()) > -1;\r\n        } )\r\n        if (schoolkey !== ''&&SearchNum===1) {\r\n          return data.map((school, i) => {\r\n            return (\r\n                <SchoolInfo\r\n                    school={school} \r\n                    key={i}\r\n                    isSelected={selectedKey !== -1}\r\n                    onClick={()=>setselectedKey(school.number)}/>\r\n               );\r\n            });\r\n        } \r\n    }\r\n    /*모달 close ->props 호출 */\r\n    const handleClose =()=> {\r\n      setOpen(false)\r\n      SendSchool()\r\n      }\r\n      \r\n\r\n    return (\r\n    <div>\r\n        <IconButton onClick={() => setOpen(true)}>\r\n            <SchoolIcon fontSize=\"large\"/>\r\n        </IconButton>\r\n        <Typography variant=\"overline\">\r\n            * 학교 입력은 선택입니다 *\r\n        </Typography>\r\n        <Typography variant=\"overline\" style={{marginLeft: '1rem', fontWeight: 'bold'}}>\r\n          {Matchcode ? school[selectedKey].school + '인증성공' : '인증실패'}\r\n        </Typography>\r\n\r\n        <Dialog onClose={() =>setOpen(false)} open={open} >\r\n            <Divider variant=\"middle\" style={{ marginBottom: 25 }} />\r\n            <DialogContent >\r\n                <div className=\"school_Wrap\" >\r\n                    <h1>[학교 검색]</h1>\r\n                    <div className=\"school\">\r\n                        <form name=\"header_search_box\"\r\n                            action=\"#\"\r\n                            method=\"get\"\r\n                            target=\"_blank\">\r\n\r\n                            <input type=\"search\"\r\n                                name=\"keyword\"\r\n                                placeholder=\"학교 입력\"\r\n                                onChange={(e) => setschoolkey(e.target.value)}/>\r\n                        </form>\r\n\r\n                        <button className=\"header_button\" type=\"button\" onClick={() =>setSearchNum(-SearchNum)}></button>\r\n                    </div>\r\n                            \r\n                    <div className=\"school_result\">           \r\n                    {mapToComponents(school)} <br/><br/>\r\n                        <SchoolDetail \r\n                              isSelected={selectedKey !== -1}\r\n                              school={school[selectedKey]}\r\n                              />\r\n                      </div> \r\n                    </div>\r\n\r\n                <Divider variant=\"middle\" style={{ marginBottom: 25, height:3 }}/>\r\n                <div className=\"email_Wrap\" >\r\n                    <h1>[이메일 전송]</h1>\r\n                    <div className=\"email\" style={{ width: \"557px\" }} >\r\n                        <form name=\"header_search_box\"\r\n                            action=\"#\"\r\n                            method=\"get\"\r\n                            target=\"_blank\">\r\n\r\n                            <input type=\"search\"\r\n                                name=\"keyword\"\r\n                                placeholder=\"이메일 입력\"\r\n                                onChange={(e) => setemailkey(e.target.value)}\r\n                                style={{ width: \"200px\" }}/>\r\n                        </form>\r\n                        <div style={{width:\"200px\",marginleft:\"30px\",fontSize:\"20px\",lineHeight:\"50px\",display:\"inline-block\" }}>\r\n                        { school[selectedKey]? <p>@ {school[selectedKey].email}</p>:\r\n                           <div> ex) naver.com </div>}\r\n                        </div>\r\n                        <MyButton style={{width:\"145px\",float:\"right\" ,paddingRight:\"30px\"}}  onClick={randcode}> EMAIL 전 송 </MyButton>\r\n                    </div>\r\n\r\n                     <div>\r\n                        <h1 className=\"check\">[인증번호]</h1>\r\n                        <div className=\"email\">\r\n                            <form name=\"header_search_box\"\r\n                                action=\"#\"\r\n                                method=\"get\"\r\n                                target=\"_blank\">\r\n                                <input type=\"search\"\r\n                                 name=\"keyword\"\r\n                                 placeholder=\"인증번호 입력\"\r\n                                    onChange={(e) =>setiscodekey(e.target.value)}/>\r\n                            </form>\r\n\r\n                            <MyButton style={{width:\"145px\",marginLeft:\"15px\"}}  onClick={checkMatchCode}> 확 인 </MyButton>\r\n                           \r\n                            \r\n                        </div>\r\n                    </div> \r\n                </div>\r\n            </DialogContent>\r\n            <DialogContent style={{height:'60px',margin:'0 auto'}} >  \r\n                        <MyButton  \r\n                            color=\"primary\"\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            onClick={() => handleClose()}\r\n                            >\r\n                            확인\r\n                        </MyButton>      \r\n            </DialogContent>\r\n        \r\n        </Dialog>\r\n    </div>\r\n    )\r\n}\r\nexport default Schooltest;\r\n","import React, { useEffect, useState } from \"react\";\nimport { BrowserRouter as Router,Route, Switch } from \"react-router-dom\";\nimport { hot } from 'react-hot-loader'\nimport { SnackbarProvider } from \"notistack\";\nimport \"../src/lib/css/main.css\"\n\nimport Store from \"./store/store\";\nimport Header from \"./components/Header\"\nimport Home from \"./components/FleamarketHome\"\nimport Login from \"./components/FleamarketLogin\"\nimport Footer from \"./components/Footer\"\nimport Action from \"./components/Action\"\nimport MyPage from \"./components/FleamarketMyPage\"\n\nfunction App() {\n  const [logged, setLogged] = useState(false)\n  const [openChat, setOpenChat] = useState(false)\n  const onLogin = () => { setOpenChat(false); setLogged(true) }\n  const onLogout = () => {\n    setLogged(false)\n    setOpenChat(false)\n    window.sessionStorage.clear()\n  }\n\n  useEffect(() => {\n    if(window.sessionStorage.getItem('id'))\n      onLogin()\n  }, [])\n\n  return(\n    <Store.Provider value={{logged, onLogin, onLogout}}>\n      <Router basename=\"/fleamarket-82\">\n          <SnackbarProvider maxSnack={3}>\n            <Action useChat={[openChat, setOpenChat]}/>\n            <Header/>\n            <Switch>\n                <Route exact path=\"/\" component={Home} />\n                <Route path=\"/login\" component={Login} />\n                <Route path=\"/mypage\" component={MyPage} />\n            </Switch>\n            <Footer/> \n          </SnackbarProvider>\n      </Router>\n    </Store.Provider>\n  );\n}\n\nexport default hot(module)(App);","import React from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Store from \"../store/store\";\r\nimport { useSnackbar } from 'notistack';\r\nimport logo_Image from \"../lib/image/test23.png\";\r\nimport test from \"../lib/image/test24.png\"\r\nimport { makeStyles,Tooltip } from '@material-ui/core'\r\n\r\nconst useStyles = makeStyles({\r\n  backImg: {\r\n    width: '100%',\r\n    height: 360,\r\n    backgroundImage:`url(${test})`,\r\n    backgroundSize: 'cover',\r\n    backgroundPosition:\"center\",\r\n    backgroundRepeat:\"no-repeat\",\r\n    position: 'absolute',\r\n    zIndex: -1\r\n  },\r\n  logo:{\r\n    maxWidth: '500px', \r\n    height: '130x', \r\n    cursor: 'pointer'\r\n  },\r\n  contents:{\r\n    margin: 'auto', \r\n    textAlign: 'center', \r\n    paddingTop: 70,\r\n    zIndex: 100\r\n  },\r\n  text:{\r\n    fontSize:\"20px\",\r\n    fontWeight:\"bold\"\r\n  },\r\n});\r\n\r\nfunction Header(props) {\r\n\r\n  const classes = useStyles()\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const id = window.sessionStorage.getItem(\"id\")\r\n\r\n  const clickLogo = () => {\r\n    if(props.history.location.pathname === '/')\r\n      window.location.reload()\r\n    else\r\n      props.history.push('/')\r\n  }\r\n  const logout = (store) => {\r\n    enqueueSnackbar('로그아웃 했습니다')\r\n    store.onLogout()\r\n    props.history.push('/');    /* 체크 */\r\n  }\r\n  \r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.backImg}/>\r\n      <div className={classes.contents}>\r\n          <img onClick={() => clickLogo()}\r\n            className={classes.logo}\r\n            src={logo_Image} alt=\"팔이피플\" />\r\n          <Store.Consumer>\r\n            {store => (\r\n              <div style={{marginTop: 20}}>{\r\n              store.logged ?\r\n                <div className={classes.text}>\r\n                  <Tooltip title=\"클릭시 로그아웃\" placement='left'> \r\n                    <Link onClick={() => logout(store)}> {id}님 &nbsp; 로그아웃 </Link> \r\n                  </Tooltip>\r\n                </div>\r\n              : \r\n                <div className={classes.text}>\r\n                  <Link to=\"/login\">  LOGIN / SIGN IN  </Link>\r\n                </div>\r\n              }</div>\r\n            )}\r\n          </Store.Consumer>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default withRouter(Header)\r\n","module.exports = __webpack_public_path__ + \"static/media/test23.aa426d6c.png\";","module.exports = __webpack_public_path__ + \"static/media/test24.a80b9315.png\";","import React from \"react\";\r\nimport \"../lib/css/footer.css\";\r\nimport \"../lib/css/common.css\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nfunction Footer() {\r\n    return (\r\n      <div id=\"footer_wrap\" style={{marginTop: \"1rem\"}}>\r\n        <footer>\r\n          <div id=\"footer_info_wrap\">\r\n            <div className=\"footer_logo_wrap\">\r\n            </div>\r\n            <p>\r\n              <b>팔이피플</b> | (39177) 경북 구미시 대학로 61\r\n              <br />\r\n              <br />\r\n              <b>팔이피플은 통신판매중개자이며 통신판매의 당사자가 아닙니다. <br />\r\n              따라서 팔이피플은 판매자가 등록한 상품, 거래정보 및 거래에\r\n              대하여 책임을 지지 않습니다.</b>\r\n              <br /><br />\r\n              고객 상담 센터 : (054) 478-7114 FAX : (054) 478-7114 E-mail \r\n              <br />\r\n              <br />\r\n              <br />© PAR2PEOPLE Corp. ALL RIGHTS RESERVED.\r\n            </p>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    );\r\n}\r\nexport default withRouter(Footer);\r\n","import React from 'react'\r\nimport Chat from \"../container/chat/Chat\"\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { IconButton } from '@material-ui/core'\r\n// import CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\n\r\nfunction Action(props) {\r\n    const [openChat, setOpenChat] = props.useChat\r\n    return (\r\n      <div style={{position: 'fixed', marginLeft: '2rem', zIndex: '99'}}>\r\n        <div style={{display: 'flex', alignItems: 'baseline'}}>\r\n          <IconButton onClick={() => setOpenChat(!openChat)} style={{marginRight: '2rem'}}>\r\n            <img src=\"https://img.icons8.com/cotton/64/000000/chat.png\" alt='bt2'/>  \r\n          </IconButton>\r\n          { openChat ? <Chat/>: null }\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Action)\r\n","import {storage} from './firebase'\r\n\r\nfunction getImageUrls(props) {\r\n    const imgAry = props.imgAry\r\n    const setLoading = props.setLoading\r\n    const setImgUrls = props.setImgUrls\r\n    var urls = \"\"\r\n    imgAry.forEach((file) => {\r\n        if(typeof(file) === 'string'){\r\n            urls = urls === \"\" ? file : urls + \" \" + file\r\n            setImgUrls(urls)\r\n            return\r\n        }\r\n        const route = \"images/\" + file.name + \"_\" + new Date().toLocaleTimeString();\r\n        const uploadTask = storage.ref(route).put(file);\r\n        uploadTask.on(\r\n            \"state_changed\",\r\n            (snapshot) => { \r\n                setLoading((snapshot.bytesTransferred / snapshot.totalBytes) * 100)\r\n            },\r\n            (err) => {\r\n                console.log(err);\r\n            },\r\n            () => { // 이미지 url 다운로드\r\n                uploadTask.snapshot.ref.getDownloadURL()\r\n                    .then((downloadURL) => {\r\n                        urls = urls === \"\" ? downloadURL : urls + \" \" + downloadURL\r\n                        setImgUrls(urls)\r\n                    })\r\n            }\r\n        )\r\n    })\r\n}\r\nexport default getImageUrls","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n    root: {\r\n      height: 10,\r\n      borderRadius: 5,\r\n      marginTop: '1rem',\r\n      marginBottom: '1rem'\r\n    },\r\n    colorPrimary: {\r\n      backgroundColor: theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\r\n    },\r\n    bar: {\r\n      borderRadius: 5,\r\n      backgroundColor: '#1a90ff',\r\n    },\r\n}))(LinearProgress);\r\n\r\nfunction Progress(props) {\r\n    return (\r\n        <BorderLinearProgress variant=\"determinate\" value={props.value} />\r\n    )\r\n}\r\n\r\nexport default Progress\r\n","import React from \"react\";\r\nimport { Zoom } from \"@material-ui/core\";\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nfunction ImageUpload(props) {\r\n    const imageBoxStyle = {\r\n        width: 160,\r\n        height: 160,\r\n        display: \"inline-block\",\r\n        border: \"1px solid #e4e4e4\",\r\n        overflow: \"hidden\",\r\n    }\r\n\r\n    const imageStyle = {\r\n        resize: \"both\",\r\n        float: \"center\",\r\n        width: 160,\r\n        height: \"auto\",\r\n    }\r\n\r\n    const [imgAry, setImgAry] = props.useImgAry\r\n    const [imgBase64Ary, setImgBase64Ary] = props.useImgBase64Ary\r\n    const hiddenFileInput = React.useRef(null)\r\n    const handleClick = () => {\r\n        hiddenFileInput.current.click();\r\n    }\r\n\r\n    const inputImg = (e) => {\r\n        const files = Array.from(e.target.files)\r\n        if (!files)\r\n            return\r\n        setImgAry([...imgAry, ...files])\r\n        files.forEach(file => {\r\n            var reader = new FileReader()\r\n            reader.readAsDataURL(file)\r\n            reader.onloadend = () => {\r\n                const base64 = reader.result\r\n                if(base64){\r\n                    let arr = imgBase64Ary\r\n                    arr.push(base64.toString())\r\n                    setImgBase64Ary([...arr])\r\n                }\r\n            }\r\n        })\r\n    }\r\n    const deleteImg = (idx) => {\r\n        let fileArr = [...imgAry]\r\n        fileArr.splice(idx, 1)\r\n        setImgAry([...fileArr])\r\n    }\r\n    const deleteNewImg = (idx) => {\r\n        let fileArr = [...imgAry]\r\n        fileArr.splice(imgAry.length - imgBase64Ary.length + idx, 1)\r\n        setImgAry([...fileArr])\r\n\r\n        let arr = [...imgBase64Ary]\r\n        arr.splice(idx,1)\r\n        setImgBase64Ary([...arr])\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <div style={{ width: 100, height: 100, border: \"1px solid lightgray\",\r\n                display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }} \r\n                onClick={handleClick}>\r\n                <input accept=\"image/*\" type=\"file\" multiple\r\n                    onChange={inputImg}\r\n                    ref={hiddenFileInput}\r\n                    style={{display: 'none'}}\r\n                />\r\n                <AddIcon color=\"action\" fontSize=\"large\"/>\r\n            </div>\r\n            {imgAry.map((image, idx) => {\r\n                if(typeof(image) === 'string' && image !== '')\r\n                    return (\r\n                    <Zoom key={idx} in={true} timeout={(imgAry.length - idx)*300}>\r\n                        <div onClick={()=> deleteImg(idx)} style={imageBoxStyle} >\r\n                        <img src={image} alt=\"미리보기\" style={imageStyle}/>\r\n                        </div>\r\n                    </Zoom>\r\n                    )\r\n                else return null\r\n            })}\r\n            {imgBase64Ary.map((image, idx) => {\r\n                return (\r\n                    <Zoom key={idx} in={true} timeout={(imgBase64Ary.length - idx)*300}>\r\n                        <div onClick={()=> deleteNewImg(idx)} style={imageBoxStyle} >\r\n                            <img src={image} alt=\"미리보기\" style={imageStyle}/>\r\n                        </div>\r\n                    </Zoom>\r\n                )}\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageUpload;\r\n","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport axios from 'axios'\r\nimport {ip} from \"../../store/ip\"\r\nimport getImageUrls from \"../../firebase/getImageUrls\";\r\nimport Progress from \"./Progress\";\r\nimport Alert from '../home/Alert'\r\n\r\nimport { Dialog, DialogContent, DialogContentText, Grid, IconButton, Input, InputAdornment, Paper, TextField, Typography } from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\nimport ImageUpload from \"./ImageUpload\";\r\nimport NearMeRoundedIcon from '@material-ui/icons/NearMeRounded';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SettingsBackupRestoreIcon from '@material-ui/icons/SettingsBackupRestore';\r\n\r\n// 이 친구를 모달로 띄울지 아니면 Transitions으로 어코디언할지\r\n// url 의 params 를 활용하여 /upload 가 붙여야 보여주기\r\nfunction UploadBoardPage(props) {\r\n    const { enqueueSnackbar } = useSnackbar()\r\n\r\n    const [title, setTitle] = useState(\"\")\r\n    const [price, setPrice] = useState(\"\")\r\n    const [contents, setContents] = useState(\"\")\r\n    const [imgUrls, setImgUrls] = useState(\"\")\r\n    const [imgAry, setImgAry] = useState([])\r\n    const [imgBase64Ary, setImgBase64Ary] = useState([]) // 미리보기\r\n\r\n    const [open, setOpen] = useState(false) \r\n    const [loading, setLoading] = useState(0)\r\n\r\n    const [alertOption, setAlertOption] = useState({})\r\n    const contentAlert = {open: true, text: \"모든 값을 넣어 주셔야 합니다\"}\r\n\r\n    // 숫자만 입력, 억 단위 이상은 지원 XX (sql price 길기가 9자리까지 수용)\r\n    const priceChange = (e) => {\r\n        const value = e.target.value.replace(/[^0-9]/g, '')\r\n        if(value.length < 10)\r\n            setPrice(value)\r\n    }\r\n    const reset = () => {\r\n        setTitle(''); setPrice(''); setContents(''); \r\n        setImgUrls(''); setImgAry([]); setImgBase64Ary([])\r\n        setLoading(0)\r\n    }\r\n    // 파이어베이스에 사진 업로드\r\n    const preUpload = () => {\r\n        if(!title || !contents || !price)\r\n            return setAlertOption(contentAlert)\r\n        \r\n        if(imgAry.length){\r\n            setOpen(true)\r\n            getImageUrls({imgAry:imgAry, setLoading: setLoading, setImgUrls: setImgUrls})\r\n        } else\r\n            submit()\r\n    }\r\n    // 게시물 게시\r\n    const submit = ()  => {\r\n        const body  = {\r\n            seller_id: window.sessionStorage.getItem('id'),\r\n            title: title,\r\n            images: imgUrls,\r\n            contents: contents,\r\n            price: price\r\n        }\r\n        axios.post(ip + \"/board/upload\", body)\r\n        .then(res => {\r\n            if(res.status !== 200)\r\n                return enqueueSnackbar('상품 업로드에 실패 했습니다.', {variant:'error'})\r\n            props.setOpenUL(false)\r\n            props.getBoards()\r\n            enqueueSnackbar('상품 업로드에 성공 했습니다.', {variant:'success'})\r\n            reset()\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            alert(err)\r\n        })\r\n        setOpen(false)\r\n    }\r\n    return (\r\n        <div style={{maxWidth: '700px', margin: '2rem auto'}}>\r\n            <Paper elevation={3} style={{padding: '40px 100px 100px 100px'}}>\r\n                <div style={{textAlign: 'center', marginBottom: '2rem'}}>\r\n                    <h2> 상품 업로드</h2>\r\n                </div>\r\n                <Grid container spacing = {3}>\r\n                    <Grid item xs={12}>\r\n                        <TextField onChange={(e) => {setTitle(e.target.value)}} \r\n                            value={title} \r\n                            label=\"글 제목\" \r\n                            fullWidth/>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Input onChange={priceChange} \r\n                            value={price.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")} \r\n                            placeholder=\"가격 입력\" \r\n                            labelwidth={40}\r\n                            startAdornment={<InputAdornment position=\"start\">₩</InputAdornment>}/>\r\n                        <br/>\r\n                        <Typography variant=\"caption\"> 이더리움(ETH) {price *(0.0000227)} </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField onChange={(e) => {setContents(e.target.value)}} \r\n                            value={contents} \r\n                            placeholder=\"올릴 게시글 내용을 작성해주세요.\" \r\n                            variant=\"outlined\" \r\n                            multiline fullWidth\r\n                            rows={7}/>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <ImageUpload useImgAry={[imgAry, setImgAry]} useImgBase64Ary={[imgBase64Ary, setImgBase64Ary]} />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <div style={{textAlign: 'center'}}>\r\n                            <IconButton onClick={reset}>\r\n                                <SettingsBackupRestoreIcon fontSize='large'/>\r\n                            </IconButton>\r\n                            <IconButton onClick={preUpload}>\r\n                                <NearMeRoundedIcon fontSize='large'/>\r\n                            </IconButton>\r\n                        </div>\r\n                    </Grid>\r\n                    <Alert option={alertOption}/>\r\n                \r\n                    <Dialog open={open}>\r\n                        <DialogContent style={{width: \"400px\", textAlign: \"center\"}}>\r\n                            <Progress value={loading}/>\r\n                            <DialogContentText>\r\n                                사진 업로드 중입니다\r\n                            </DialogContentText>\r\n                            <IconButton onClick={() => submit()} disabled={loading !== 100}>\r\n                                <DoneIcon/>\r\n                            </IconButton>\r\n                            <IconButton onClick={() => setOpen(false)}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </Grid>\r\n            </Paper>\r\n            </div>\r\n    );\r\n}\r\nexport default withRouter(UploadBoardPage)","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Alert from '../home/Alert'\r\n\r\nimport { Button, FormControlLabel, Grid, Switch } from '@material-ui/core'\r\nimport { ToggleButton, ToggleButtonGroup } from \"@material-ui/lab\";\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\n\r\nfunction Filter(props) {\r\n  const school = window.sessionStorage.getItem(\"school\")\r\n  const getBoards = props.getBoards\r\n  const [alertOption, setAlertOption] = useState({})\r\n  const loginAlert= {open: true, text: \"로그인하시지요..\", doAfter: () => {props.history.push(\"/login\")}}\r\n  const noSchoolAlert= {open: true, text: \"내 학교를 인증받으세요!\", doAfter: () => {props.history.push(\"/mypage\")}}\r\n      \r\n  const [type, setType] = props.useType\r\n  const [align, setAlign] = props.useAlign\r\n  const [desc, setDesc] = props.useDesc\r\n  const [mySchoolText, setMySchoolText] = props.useSchool\r\n  const [viewMySchool, setViewMySchool] = useState(false)\r\n  const [viewNoContract, setViewNoContract] = props.useViewNoContract\r\n\r\n  const changType = (event, newType) => {\r\n      if (newType === null)\r\n          return\r\n      getBoards({type: newType})\r\n      setType(newType)\r\n  }\r\n  const changeAlign = (event, newAlign) => {\r\n      if (newAlign === null)\r\n          return\r\n      getBoards({align: newAlign})\r\n      setAlign(newAlign)\r\n  }\r\n  const changeCending = () => {\r\n      getBoards({desc: !desc})\r\n      setDesc(!desc)\r\n  }\r\n  const changeMySchool = () => {\r\n    if(!window.sessionStorage.getItem(\"id\"))\r\n      return setAlertOption(loginAlert)\r\n    if(school === '')\r\n      return setAlertOption(noSchoolAlert)\r\n\r\n    setMySchoolText(viewMySchool? '' : school)\r\n    getBoards({school: viewMySchool? '' : school})\r\n    setViewMySchool(!viewMySchool)\r\n  }\r\n  const changeViewNoContract = () => {\r\n    getBoards({viewNoContract: !viewNoContract})\r\n    setViewNoContract(!viewNoContract)\r\n  }\r\n  return (\r\n    <Grid item xs={12} style={{margin: '1rem'}}>\r\n      <Grid container spacing={3} justify=\"center\">\r\n        <Grid item >\r\n          <ToggleButtonGroup value={type} onChange={changType} exclusive style={{maxHeight: 50}}>\r\n            <ToggleButton value=\"all\">\r\n              <h4>전체</h4>\r\n            </ToggleButton>\r\n            <ToggleButton value=\"wish\">\r\n              <h4>찜한 물건</h4>\r\n            </ToggleButton>\r\n            <ToggleButton value=\"mine\">\r\n              <h4>내 물건</h4>\r\n            </ToggleButton>\r\n            <ToggleButton value=\"purchased\">\r\n              <h4>구매한 물건</h4>\r\n            </ToggleButton>\r\n          </ToggleButtonGroup>\r\n        </Grid>\r\n        \r\n        <Grid item >\r\n          <FormControlLabel \r\n            control={<Switch color=\"primary\" checked={viewMySchool} onChange={changeMySchool} />}\r\n            label={mySchoolText===''? '내 학교' : mySchoolText}\r\n          />\r\n        </Grid>\r\n        <Alert option={alertOption}/>\r\n\r\n        <Grid item>\r\n          <ToggleButtonGroup value={align} onChange={changeAlign} exclusive style={{maxHeight: 50}}>\r\n            <ToggleButton value=\"time\" >\r\n                <h4>시간순</h4>\r\n            </ToggleButton>\r\n            <ToggleButton value=\"view\">\r\n                <h4>조회순</h4>\r\n            </ToggleButton>\r\n            <Button onClick={() => changeCending()}>\r\n                {desc ? <ArrowDropDownIcon/>: <ArrowDropUpIcon/>}\r\n            </Button>\r\n            <Button color={viewNoContract ? 'primary' : 'action'} onClick={() => changeViewNoContract()}>\r\n              <DashboardIcon color={viewNoContract ? 'primary' : 'action'}/>\r\n              &nbsp;거래전 게시물만 보기\r\n            </Button>\r\n          </ToggleButtonGroup>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default withRouter(Filter)\r\n","import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios';\r\nimport {ip} from \"../../store/ip\"\r\nimport { useSnackbar } from 'notistack';\r\n\r\nimport { Chip, Divider, Fade, Grid, IconButton, InputBase, List, ListItem, ListItemText, Paper, Popper, Tooltip} from '@material-ui/core'\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport WhatshotOutlinedIcon from '@material-ui/icons/WhatshotOutlined';\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nfunction Search(props) {\r\n  const user_id = window.sessionStorage.getItem(\"id\")\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const getBoards = props.getBoards\r\n  const [word, setWord] = props.useWord\r\n\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [hotList, setHotList] = useState([])\r\n  const openHot = Boolean(anchorEl);\r\n  const popper_id = openHot ? 'transitions-popper' : undefined;\r\n\r\n  const [showKeywords, setShowKeywords] = useState(true)\r\n  const [keywords, setKeywords] = useState([])\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n    searchHit()\r\n    getBoards({search: word})\r\n  }\r\n  \r\n  // 검색어 입력 횟수 누적\r\n  const searchHit = (text=word) => {\r\n    if(word.replace(' ', '') === '')\r\n      return\r\n    axios.post(ip+'/search', {text: text})\r\n      .then(() => {\r\n        getHotList()\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"검색어 입력에 실패 했습니다.\")\r\n      })\r\n  }\r\n  // 인기 검색어 창 열기\r\n  const clickHot = (e) => {\r\n    setAnchorEl(anchorEl ? null : e.currentTarget)\r\n    getHotList()\r\n  }\r\n  const getHotList = () => {\r\n    axios.get(ip+'/search', {params: {limit: 5}})\r\n      .then(res => {\r\n        const gets = res.data.searches[0]\r\n        setHotList(gets)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"인기 검색어 조회에 실패 했습니다.\")\r\n      })\r\n  }\r\n  /* 검색 키워드 */\r\n  const clickKeyword = (text) => {\r\n    setWord(text)\r\n    searchHit(text)\r\n    getBoards({search: text})\r\n  }\r\n  const registKeyword = () => {\r\n    var invaild = (word.replace(' ', '') === '')\r\n    keywords.map((item) => {\r\n      if(item.keyword === word){\r\n        invaild=true\r\n        enqueueSnackbar('['+word +'] 키워드가 이미 있습니다', { variant: 'info'})\r\n      }\r\n    })\r\n    if(invaild)\r\n      return\r\n    axios.post(ip+'/users/keywords/register',  {user_id: user_id, keyword: word})\r\n      .then(() => {\r\n        getKeywords()\r\n        enqueueSnackbar('['+word +'] 키워드를 등록했습니다', { variant: 'success'})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"키워드 등록에 실패 했습니다.\")\r\n      })\r\n  }\r\n  const deleteKeyword = (item) => {\r\n    axios.post(ip+'/users/keywords/delete',  {id: item.id})\r\n      .then(() => {\r\n        getKeywords()\r\n        enqueueSnackbar('['+item.keyword+'] 키워드를 삭제했습니다')\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"키워드 삭제에 실패 했습니다.\")\r\n      })\r\n  }\r\n\r\n  const getKeywords = () => {\r\n    if(!user_id)\r\n      return\r\n    axios.get(ip+'/users/keywords',  { params: {user_id: user_id}})\r\n      .then(res => {\r\n        const gets = res.data.keywords[0]\r\n        setKeywords([...gets])\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"키워드 조회에 실패 했습니다.\")\r\n      })\r\n  }\r\n  useEffect(() => {\r\n    getKeywords()\r\n  }, user_id)\r\n\r\n  return (\r\n    <Grid item xs={6}>\r\n      <Grid container justify=\"center\" alignItems=\"center\">\r\n        <form onSubmit={submitHandler}>\r\n          <Paper elevation={5} style={{padding: '2px 4px', display: 'flex', alignItems: 'center', width: 700}}>\r\n            \r\n            <Tooltip title=\"키워드 등록\" placement=\"left\"  >\r\n              <IconButton onClick={registKeyword}>\r\n                <StarRoundedIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <InputBase style={{marginLeft: '1rem', fontWeight: 'bold', fontSize: '1.4rem', color: \"#34373B\", height: 60}}\r\n              value={word}\r\n              onChange={e => setWord(e.target.value)}\r\n              fullWidth\r\n            />\r\n            <Fade in={word !== ''}> \r\n                <IconButton onClick={() => {setWord(''); getBoards({search: ''})}}> \r\n                  <CloseIcon/> \r\n                </IconButton>\r\n            </Fade>\r\n\r\n            <Divider orientation=\"vertical\" style={{ height: 40, margin: 4}}/>\r\n\r\n            <IconButton type=\"submit\">\r\n              <SearchIcon />\r\n            </IconButton>\r\n            <Tooltip title=\"Top5 인기 검색어\" placement='right'>\r\n              <IconButton onClick={e => clickHot(e)}>\r\n                <WhatshotOutlinedIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Popper id={popper_id} open={openHot} anchorEl={anchorEl} transition placement=\"right\">\r\n            {({ TransitionProps }) => (\r\n              <Fade {...TransitionProps} timeout={350}>\r\n                <List style={{margin: '2rem'}}>\r\n                  {hotList.map((item, idx) => {\r\n                    return(\r\n                      <ListItem button onClick={() => clickKeyword(item.text)}>\r\n                        <ListItemText primary={(1+idx)+\".  \"+item.text} />\r\n                      </ListItem>\r\n                      )\r\n                  })}\r\n                </List>\r\n              </Fade>\r\n            )}\r\n            </Popper>\r\n          </Paper>\r\n        </form>\r\n      </Grid>\r\n      <Grid container justify=\"center\" alignItems=\"center\" style={{marginTop: '0.8rem'}}>\r\n        <div style={{display: 'flex', width: 690, overflow: 'auto'}}> \r\n          {keywords.map((item, idx) => {\r\n            return (\r\n              <Fade in={showKeywords} key={idx} timeout={(idx+1)*100}>\r\n                <Chip variant=\"outlined\"\r\n                  label={item.keyword}\r\n                  onClick={() => clickKeyword(item.keyword)}\r\n                  onDelete={() => deleteKeyword(item)}\r\n                />\r\n              </Fade>\r\n            )\r\n          })}\r\n        </div>\r\n        <Tooltip title=\"내 키워드 목록\" placement='right'>\r\n          <IconButton size='small' onClick={() => setShowKeywords(!showKeywords)}>\r\n            {showKeywords ? <RemoveIcon/> : <AddIcon/> }\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default Search\r\n","import React, { useEffect, useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport axios from 'axios';\r\nimport { useSnackbar } from 'notistack';\r\nimport {ip} from \"../../store/ip\"\r\nimport getImageUrls from \"../../firebase/getImageUrls\";\r\nimport Alert from \"../home/Alert\";\r\nimport ImageUpload from \"./ImageUpload\";\r\nimport Progress from \"./Progress\";\r\n\r\nimport { Button, IconButton, InputAdornment, InputBase,Tooltip, Typography } from '@material-ui/core'\r\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core'\r\nimport DeleteOutlineRoundedIcon from '@material-ui/icons/DeleteOutlineRounded';\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\n\r\n// 여러 상세페이지를 띄워 주고 싶은 기능 생각해야\r\nfunction BoardDetail(props) {\r\n    const { enqueueSnackbar } = useSnackbar()\r\n    const user_id = window.sessionStorage.getItem(\"id\")\r\n    const [open, setOpen] = props.useOpen\r\n    //var board = JSON.parse(JSON.stringify(props.board)) // 깊은 복사\r\n    const [board, getBoards] = props.useBoard\r\n    const oriImgAry = board.images === '' ? [] : board.images.split(\" \")\r\n    const [fullImg,setFullImg]=useState(\"\")\r\n    const [openImgModal,setOpenImgModal]=useState(false)\r\n    \r\n    const [title, setTitle] = useState('')\r\n    const [price, setPrice] = useState('')\r\n    const [contents, setContents] = useState('')\r\n    const [imgUrls, setImgUrls] = useState('')\r\n    const [imgAry,setImgAry] = useState([])\r\n    const [imgBase64Ary, setImgBase64Ary] = useState([]) // 미리보기\r\n    const [responseTmp, setResPonseTmp] = useState('')\r\n    const [level, setLevel] = useState('')\r\n    \r\n    useEffect(() => {\r\n        setTitle(board.title)\r\n        setPrice(board.price)\r\n        setContents(board.contents)\r\n        setImgUrls('')\r\n        setImgAry(board.images.split(\" \"))\r\n        setImgBase64Ary([])\r\n        getSellerInfo()\r\n    }, board)\r\n\r\n    const [edit, setEdit] = useState(false)\r\n    const [wish, setWish] = props.useWish   \r\n    const [alertOption, setAlertOption] = useState({})\r\n    const loginAlert = {open: true, text: \"로그인하시지요..\", doAfter: () => {props.history.push(\"/login\")}}\r\n\r\n    const [openDialog, setOpenDialog] = useState(false) \r\n    const [loading, setLoading] = useState(0)\r\n\r\n\r\n    const getSellerInfo = () => {\r\n        axios\r\n        .get(ip + '/board/sellerInfo', {\r\n            params : {\r\n                board_id : board.id\r\n            }\r\n        })\r\n        .then((data) => {\r\n            const result = data.data[0]\r\n            if (result) {\r\n                setResPonseTmp(result.responseRate)\r\n                setLevel(result.level)\r\n            }\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n    const myLevel = (level) => {\r\n        var lv = parseInt(level / 10)\r\n        if (lv === 0) return \"새내기\";\r\n        else if (lv === 1) return \"1 학년\";\r\n        else if (lv === 2) return \"2 학년\";\r\n        else if (lv === 3) return \"3 학년\";\r\n        else if (lv === 4) return \"4 학년\";\r\n        else if (lv === 5) return \"석사\";\r\n        else if (lv === 6) return \"박사\";\r\n        else if (lv === 7) return \"교수\";\r\n        else return \"전문가\";\r\n    }\r\n    const levelColor = (level) => {\r\n        switch(level){\r\n            case 0: return '#2f4f4f'\r\n            case 1: return '#cd853f'\r\n            case 2: return '#b8860b'\r\n            case 3: return '#006400'\r\n            case 4: return '#808000'\r\n            case 5: return '#000080'\r\n            case 6: return '#7b68ee'\r\n            case 7: return '#f08080'\r\n            default: return 'red'\r\n        }\r\n    }\r\n    const tmpColor = (tmp) => {\r\n        if(tmp > 37.0)\r\n            return '#ff00ff'\r\n        else if(tmp > 36.5)\r\n            return '#dc143c'\r\n        else if (tmp === 36.5)\r\n            return '#ff4500'\r\n        else\r\n            return '#4169e1'\r\n    }\r\n    const deleteBoard = () => {\r\n        axios\r\n            .post(ip + '/board/deleteboard', {\r\n            board_id: board.id\r\n            })\r\n            .then((data) => {\r\n                const state = data.data\r\n                setOpen(false)\r\n                getBoards()\r\n                if (state===0 || state===1 || state===7 || state===11) \r\n                    enqueueSnackbar('게시글을 삭제했습니다.', { variant: 'success' })\r\n                else if (state === 4)\r\n                    enqueueSnackbar('거래완료한 게시글은 삭제할 수 없습니다.')\r\n                else\r\n                    enqueueSnackbar('거래중인 게시글을 삭제하지 못했습니다.')\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(\"게시물 삭제응답 오류\")\r\n            })\r\n    }\r\n    \r\n    const preEditBoard = (vaild) => {\r\n        setEdit(false)\r\n        if(vaild === false){ // 변경 초기화\r\n            setTitle(board.title); setPrice(board.price); setContents(board.contents)\r\n            setImgUrls(''); setImgAry(oriImgAry); setImgBase64Ary([]);\r\n            return\r\n        }\r\n\r\n        var isImgChange = false\r\n        var isNewImage = false\r\n        if(oriImgAry.length === imgAry.length){\r\n            oriImgAry.forEach((img, idx) => {\r\n                if(img !== imgAry[idx])\r\n                    isNewImage = true\r\n            })\r\n        } else {\r\n            isImgChange = true\r\n            imgAry.forEach((img) => {\r\n                if(typeof(img) !== 'string')\r\n                    isNewImage = true\r\n            })\r\n        }\r\n        // firebase에 upload할 사진이 있다면\r\n        if(isNewImage){\r\n            getImageUrls({imgAry: imgAry, setLoading: setLoading, setImgUrls: setImgUrls})\r\n            setOpenDialog(true)\r\n        }\r\n        else{\r\n            var tmpUrls = \"\"\r\n            imgAry.forEach((url) => { tmpUrls = (tmpUrls === \"\" ? url : tmpUrls + \" \" + url) })\r\n            editBoard(isImgChange, tmpUrls)\r\n        }\r\n        \r\n    }\r\n    const editBoard = (imgChange, url) => {\r\n        if(board.title === title && !imgChange && board.contents === contents && board.price === price)\r\n            return\r\n        const body  = {\r\n            board_id: board.id,\r\n            title: title,\r\n            images: url,\r\n            contents: contents,\r\n            price: price\r\n        }\r\n        axios.post(ip+'/board/edit', body)\r\n            .then(() => {\r\n                getBoards()\r\n                enqueueSnackbar('게시물이 수정되었습니다', { variant: 'success'})\r\n                setOpenDialog(false)\r\n                setOpen(false)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(\"게시물 수정 오류\")\r\n            })\r\n    }\r\n    const creatChat = () => {\r\n        if(!user_id)\r\n            return setAlertOption(loginAlert)\r\n\r\n        var newRoom_id = 0    \r\n        axios.get(ip+'/chat/new', {params:{seller_id: board.seller_id, buyer_id: user_id, board_id: board.id}})\r\n            .then(res => {\r\n                setOpen(false)\r\n                enqueueSnackbar(board.seller_id + '님과 대화를 시작합니다.')\r\n                newRoom_id = res.data.id\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(\"채팅방 개설응답 오류\")\r\n            })\r\n\r\n        \r\n    }\r\n    const wishBoard = () => {\r\n        if(!user_id)\r\n            return setAlertOption(loginAlert)\r\n            \r\n        axios.post(ip+'/board/wish', {isWish: wish, user_id: user_id, board_id: board.id})\r\n        .then(() => {\r\n            const message = wish ? \"  [찜하기] 해제했습니다!\" : \"  [찜하기] 시전!\"\r\n            setWish(!wish)\r\n            enqueueSnackbar(board.title + message)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            alert(\"게시물 찜하기 오류\")\r\n        })\r\n    }\r\n\r\n    // 이미지 크게 보는 modal\r\n    const clickImgModal=(img)=>{ \r\n        setOpenImgModal(true)\r\n        setFullImg(img)\r\n    }\r\n    const Imagesmodal=()=>{ \r\n        return(\r\n            <Dialog open={openImgModal} onClose={() => setOpenImgModal(false)} \r\n                fullWidth={true} maxWidth={'lg'}>\r\n                <img src={fullImg} alt=\"fullImg\" onClick={() => setOpenImgModal(false)}\r\n                    style={{maxWidth: '100%', maxHeight: '100%', bottom: 0, left: 0,right: 0, top: 0,\r\n                    margin: 'auto',overflow: 'auto',position: 'fixed'}}/>\r\n           </Dialog>\r\n        )\r\n    }\r\n\r\n    // 숫자만 입력, 3자리 끊기, 억 단위 이상은 지원 XX (sql price 길기가 9자리까지 수용)\r\n    const priceChange = (e) => {\r\n        const value = e.target.value.replace(/[^0-9]/g, '')\r\n        if(value.length < 10)\r\n            setPrice(value)\r\n    }\r\n    \r\n    const BoardAction = () => {\r\n        if(board.seller_id === user_id)\r\n            return (<div style={{display: 'flex'}}>\r\n                { edit ? <div> \r\n                    <IconButton onClick={() => preEditBoard(true)}> \r\n                        <DoneIcon/>\r\n                    </IconButton>\r\n                    <IconButton onClick={() => preEditBoard(false)}>\r\n                        <CloseIcon/>\r\n                    </IconButton>\r\n                </div> :\r\n                    <IconButton onClick={() => setEdit(true)}>\r\n                        <EditOutlinedIcon/>\r\n                    </IconButton>\r\n                }\r\n                    <IconButton onClick={() => deleteBoard()}>\r\n                        <DeleteOutlineRoundedIcon/>\r\n                    </IconButton>\r\n            </div>)\r\n        else return (\r\n                <div>\r\n                    <IconButton onClick={()=>wishBoard()}>\r\n                        {wish ? <FavoriteIcon/> : <FavoriteBorderIcon/>}\r\n                    </IconButton>\r\n                    <Button autoFocus onClick={()=>creatChat()} color=\"primary\">\r\n                        판매자와 채팅하기\r\n                    </Button>\r\n                </div>\r\n    )}\r\n    /* 상품의 디테일 페이지 */\r\n    return (\r\n        <Dialog open={open} onClose={() => {preEditBoard(false); setOpen(false)}} scroll = 'paper' maxWidth={\"lg\"}>\r\n            {/* 상품 타이틀 */}\r\n            <DialogTitle>\r\n                <InputBase style={{ fontWeight: 'bold', fontSize: 'large', height: '13px'}}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    value={title}\r\n                    fullWidth\r\n                    readOnly={!edit}  \r\n                />\r\n                <Typography variant=\"overline\">\r\n                    {board.seller_id ? board.seller_id : '탈퇴한 사용자'}\r\n                </Typography>\r\n                <Typography variant=\"overline\" style={{marginLeft: '2rem', fontWeight: 'bold', color: tmpColor(responseTmp)}}>\r\n                    {responseTmp}℃\r\n                </Typography>\r\n                <Typography variant=\"overline\" style={{marginLeft: '1rem', fontWeight: 'bold', color: levelColor(level)}}>\r\n                    {myLevel(level)}\r\n                </Typography>\r\n                <div>\r\n                    <InputBase\r\n                        onChange={(e) => priceChange(e)}\r\n                        value={String(price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\r\n                        readOnly={!edit}\r\n                        startAdornment={<InputAdornment position=\"start\">₩</InputAdornment>}\r\n                    />\r\n                    <Typography variant=\"caption\"> 이더리움(ETH) <span style={{fontWeight: 'bold'}}>{price *(0.0000227)}</span> </Typography>\r\n                </div>\r\n            </DialogTitle>\r\n\r\n            {/* 상품 상세정보 */}\r\n            <DialogContent dividers style={{ minWidth: 500, maxWidth: 650, minHeight: 600 }}>\r\n                <DialogContentText tabIndex={-1}>\r\n                    <InputBase\r\n                        onChange={(e) => setContents(e.target.value)}\r\n                        value={contents}\r\n                        multiline\r\n                        rows={7} rowsMin={7}\r\n                        readOnly={!edit}\r\n                    />\r\n                </DialogContentText>\r\n\r\n                { edit ? <ImageUpload useImgAry={[imgAry, setImgAry]} useImgBase64Ary={[imgBase64Ary, setImgBase64Ary]} /> \r\n                    : <div>{\r\n                        imgAry.map((image,index) => {\r\n                            return ( \r\n                                typeof(image) !== 'string' || image === '' ? null :\r\n                                <div key={index} onClick={()=>clickImgModal(image)}\r\n                                    style={{width: 200, height: 200, border: \"1px solid #e4e4e4\",\r\n                                        backgroundImage: `url(${image})`, backgroundSize:'contain', backgroundPosition:\"center\", backgroundRepeat:\"no-repeat\",\r\n                                        display: \"inline-block\", marginTop:\"20px\",}}\r\n                                />\r\n                        )})\r\n                    }</div>\r\n                }\r\n                {Imagesmodal()}    \r\n\r\n                <Dialog open={openDialog}>\r\n                    <DialogContent style={{width: \"400px\", textAlign: \"center\"}}>\r\n                        <Progress value={loading}/>\r\n                        <DialogContentText>\r\n                            사진 업로드 중입니다\r\n                        </DialogContentText>\r\n                        <IconButton onClick={() => editBoard(true, imgUrls)} disabled={loading !== 100}>\r\n                            <DoneIcon/>\r\n                        </IconButton>\r\n                        <IconButton onClick={() => setOpenDialog(false)}>\r\n                            <CloseIcon/>\r\n                        </IconButton>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </DialogContent>\r\n\r\n            {/* 기능수행 */}\r\n            <DialogActions>\r\n                <BoardAction/>\r\n            </DialogActions>\r\n            <Alert option={alertOption}/>\r\n        </Dialog>\r\n    )\r\n}\r\nexport default withRouter(BoardDetail)","import React, { useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport axios from 'axios';\r\nimport {ip} from \"../../store/ip\"\r\nimport BoardDetail from \"./BoardDetail\";\r\nimport noimg from '../../lib/image/noimg.png'\r\n\r\nimport { Card, CardActionArea, CardContent, CardMedia, Typography } from '@material-ui/core'\r\nimport WhatshotIcon from '@material-ui/icons/Whatshot';\r\n\r\n// 여러 상세페이지를 띄워 주고 싶은 기능 생각해야\r\nfunction BoardThum(props) {\r\n    const user_id = window.sessionStorage.getItem(\"id\")\r\n    const [board, getBoards] = props.useBoard\r\n    const [open, setOpen] = useState(false)\r\n    const [wish, setWish] = useState(false)\r\n        \r\n    const printPast = (time) => {\r\n        var past = parseInt((new Date() - new Date(time))/1000)\r\n        if(past < 60)\r\n            return past + \"초 전\"\r\n        if(past < 3600)\r\n            return parseInt(past/60) + \"분 전\"\r\n        if(past < 86400)\r\n            return parseInt(past/3600) + \"시간 전\"\r\n        past /= 86400\r\n        if(past > 365)\r\n            return parseInt(past/365) + \"년 전\"\r\n        return past < 31 ? parseInt(past) + \"일 전\" : parseInt(past/12) + \"달 전\" \r\n    }\r\n\r\n    const clickBoard = () => {\r\n        axios.get(ip+'/board/hit', { params: { id: board.id }})\r\n        .then(() => {\r\n            board.hit += 1\r\n            getWish()\r\n            setOpen(true)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            alert(\"게시물 클릭응답 오류\")\r\n        })\r\n    }\r\n    const getWish = () => {\r\n        axios.get(ip + '/board/wish', { params: {board_id: board.id, user_id: user_id}})\r\n            .then(res => {\r\n                setWish(res.data.isWish)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert(\"찜상태조회 응답 오류\")\r\n            })\r\n    }\r\n\r\n    const boardState = (state) => {\r\n        switch(state){\r\n            default: case 0: case 1:\r\n                break\r\n            case 2: case 3:\r\n                return <span style={{fontWeight: \"bold\", color: '#cd5c5c', paddingRight: '1rem'}}>거래중</span>\r\n            case 4:\r\n                return <span style={{fontWeight: \"bold\", color: '#2f4f4f', paddingRight: '1rem'}}>거래완료</span>\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            {/* 게시판 썸네일 */}\r\n            <CardActionArea onClick={clickBoard}>\r\n                <Card style={{display: 'flex', height: 150}}>\r\n                    <CardMedia style={{ width: 150, height: 150}}\r\n                     image={board.images==='' ? noimg : board.images }\r\n                    />\r\n                    <CardContent style={{flex: 1}}>\r\n                        <Typography variant=\"h6\" align='left' noWrap style={{maxWidth: 345}}>\r\n                            {board.title}\r\n                        </Typography>\r\n                        <Typography color=\"textSecondary\" align='left'>\r\n                            {String(board.price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \" 원\"}\r\n                        </Typography>\r\n                        <Typography color=\"textSecondary\" align='left'>\r\n                            {board.seller_id}\r\n                        </Typography>\r\n                        <Typography color=\"textSecondary\" align='right'>\r\n                            {boardState(board.state)}\r\n                            {printPast(board.editDateTime) +  \"   \"} <WhatshotIcon fontSize=\"small\"/> {board.hit}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </Card>\r\n            </CardActionArea>\r\n            {/* 게시판 상세페이지 */}\r\n            <BoardDetail useBoard={[board, getBoards]} useOpen={[open, setOpen]} useWish={[wish, setWish]}/>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(BoardThum)","\r\nimport React from 'react'\r\nimport BoardThum from \"./BoardThum\"\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nimport { Grid, Grow, IconButton, Typography } from '@material-ui/core'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nfunction Board(props) {\r\n    const [boards, getBoards] = props.useBoard\r\n    \r\n    const showMore = () => {\r\n        getBoards({start_idx: boards.length})\r\n    }\r\n\r\n    // 상품 카드 이미지 좌측에 그리기,, view 아이콘으로 하기, 거래 상태를 표시\r\n    const renderBoards = boards.map((board,index) => {\r\n        return (\r\n            <Grow key={index} in={true} {...{ timeout: 200*(boards.length - index) }}>\r\n                <Grid item xs={12} sm={6} md={4}>\r\n                    <BoardThum index={index} useBoard={[board, getBoards]}/>\r\n                </Grid>\r\n            </Grow>\r\n        )\r\n    })\r\n\r\n    return (\r\n        <div style={{textAlign: 'center', padding: '0px 4rem 2rem 4rem'}}>\r\n            {/* 상품게시판 출력 */}\r\n            <Grid container spacing={4} style={{padding: \"3rem\"}}>\r\n                {renderBoards}\r\n            </Grid>\r\n            <div>\r\n                { boards.length === 0 ? <Typography> 게시물이 없습니다 </Typography> : \r\n                    boards.length % 6 ? <Typography> 더 이상 게시물이 없습니다 </Typography> : \r\n                    <IconButton onClick={showMore} > \r\n                        <ExpandMoreIcon fontSize={'large'} />\r\n                    </IconButton>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(Board)","import React, { useEffect, useState } from \"react\";\r\nimport axios from 'axios'\r\nimport {ip} from \"../store/ip\"\r\nimport { withRouter } from \"react-router-dom\";\r\nimport UploadBoard from \"../container/board/UploadBoard\";\r\nimport Chat from \"../container/chat/Chat\"\r\nimport Filter from \"../container/home/Filter\"\r\nimport Search from \"../container/home/Search\"\r\nimport Alert from \"../container/home/Alert\"\r\nimport Board from \"../container/board/Board\"\r\n\r\nimport { Collapse, Grid, IconButton } from \"@material-ui/core\";\r\nimport { useSnackbar } from 'notistack';\r\n\r\nfunction FleamarketHome(props){\r\n  const user_id = window.sessionStorage.getItem(\"id\")\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [openUL, setOpenUL] = useState(false)\r\n  const [openChat, setOpenChat] = useState(false) \r\n  const [alertOption, setAlertOption] = useState({})\r\n  const loginAlert= {open: true, text: \"로그인하시지요..\", doAfter: () => {props.history.push(\"/login\")}}\r\n  \r\n  const [boards, setBoards] = useState([])\r\n  const [word, setWord] = useState(\"\")\r\n  const [school, SetSchool] = useState('')\r\n  \r\n  const SHOW_CNT = 6\r\n  const [type, setType] = useState('all')\r\n  const [align, setAlign] = useState('time')\r\n  const [desc, setDesc] = useState(true)\r\n  const [viewNoContract, setViewNoContract] = useState(false)\r\n\r\n  const clickUL = () => {\r\n    if(!window.sessionStorage.getItem(\"id\"))\r\n      return setAlertOption(loginAlert)\r\n    if(!openUL)\r\n      setOpenChat(false)\r\n    setOpenUL(!openUL)\r\n  }\r\n  const clickMyPage = () => {\r\n    if(!window.sessionStorage.getItem(\"id\"))\r\n      return setAlertOption(loginAlert)\r\n    props.history.push('/mypage')\r\n\r\n  }\r\n  // SHOW_CNT 개수 만큼 계속 게시물을 가져온다 / 필터링 / 기본 시간순 출력\r\n  const getBoards = (arg={}) => {\r\n    var options = {\r\n      start_idx:    0, \r\n      cnt:          SHOW_CNT, \r\n      type:         type, \r\n      align:        align,\r\n      desc:         desc,\r\n      user_id:      user_id,\r\n      school:       school,\r\n      search:       word,\r\n      viewNoContract: viewNoContract,\r\n    }\r\n    for (var prop in arg)\r\n      options[prop] = arg[prop]\r\n\r\n    axios.get(ip+'/board',  { params: options})\r\n      .then(res => {\r\n        const gets = res.data.boards[0]\r\n        setBoards( options.start_idx ? [...boards, ...gets] : [...gets])\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert(\"상품들을 가져오는데 실패 했습니다.\")\r\n      })\r\n  }\r\n  \r\n  useEffect(() => {\r\n    getBoards()\r\n  }, []) \r\n\r\n  const messageSnackbar = (type) => {\r\n    switch(type){\r\n      default: case 0: case 20: return '메시지를 보냈습니다'\r\n      case 1: return '[구매요청] 했습니다'\r\n      case 2: return '[구매수락] 했습니다'\r\n      case 3: return '[송금] 했습니다'\r\n      case 4: return '[구매확정] 했습니다'\r\n      case 9: return '채팅방을 나갔습니다'\r\n      case 10: return '거래 취소했습니다'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Alert option={alertOption}/>\r\n      <Grid spacing={1} container justify=\"center\" alignItems=\"center\" style={{marginTop: '1rem'}}>\r\n        {/* 액션창 */}\r\n        <Grid item xs={12}>\r\n          <div style={{textAlign: 'center'}}>\r\n            <IconButton onClick={() => clickUL()} >              \r\n              <img src=\"https://img.icons8.com/cotton/64/000000/upload-to-cloud--v1.png\" alt='bt1'/>\r\n            </IconButton>\r\n            <IconButton onClick={() => clickMyPage()}>\r\n              <img src=\"https://img.icons8.com/cotton/64/000000/gender-neutral-user--v1.png\" alt='bt3'/>\r\n            </IconButton>\r\n          </div>\r\n          <Grid container direction=\"column\" alignItems=\"center\">\r\n            <Collapse in={openUL}>\r\n              <UploadBoard getBoards={getBoards} setOpenUL={setOpenUL}/>\r\n            </Collapse>\r\n            <Collapse in={openChat}>\r\n              <div  style={{marginTop:\"30px\",marginBottom:\"10px\"}}>\r\n                <Chat />\r\n              </div>\r\n            </Collapse>\r\n          </Grid> \r\n        </Grid>\r\n\r\n        {/* 검색 */}\r\n        <Search getBoards={getBoards} useWord={[word, setWord]}/>\r\n        \r\n        {/* 필터링 */}\r\n        <Filter getBoards={getBoards} \r\n          useSchool={[school, SetSchool]}\r\n          useAlign={[align, setAlign]} \r\n          useType={[type, setType]} \r\n          useDesc={[desc, setDesc]}\r\n          useViewNoContract={[viewNoContract, setViewNoContract]}/>\r\n      </Grid>\r\n      \r\n      {/* 게시물 목록 */}\r\n      <Board useBoard={[boards, getBoards]}/>\r\n    </div>\r\n  )\r\n}\r\nexport default withRouter(FleamarketHome)","import React, { useState } from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {ip} from \"../../store/ip\"\r\nimport axios from 'axios';\r\nimport Store from \"../../store/store\";\r\n\r\nimport { Button, Grid, Container, Typography, Paper, Input } from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nfunction Login(props) {\r\n  const [id, setId] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [message, setMessage] = useState(\"\")\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault()\r\n    if(!id || !password)\r\n      return setMessage(\"모두 입력해주세요\")\r\n\r\n    axios.get(ip+\"/users/login\", { params: {id: id, password: password}})\r\n      .then(response => {\r\n        const res = response.data\r\n\r\n        // 로그인 실패시 {success, message}\r\n        if(!res.success){\r\n          setMessage(res.message)\r\n          return\r\n        }\r\n        // 로그인 성공시 {success, nickname, school}\r\n        window.sessionStorage.setItem('id',id)\r\n        window.sessionStorage.setItem('nickname', res.nickname)\r\n        window.sessionStorage.setItem('school',res.school)\r\n        enqueueSnackbar('로그인에 성공했습니다')\r\n        props.onLogin()\r\n        props.history.push('/')\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  // 로그인 폼\r\n  const LoginForm = () => {\r\n    return (\r\n      <form noValidate onSubmit={onSubmit}>\r\n        <Grid container spacing={1} justify='center'>\r\n            <Grid item xs={8}>\r\n              <Input onChange={(e) => {setId(e.target.value)}}\r\n                value={id}\r\n                inputProps={{style: { textAlign: 'center',  fontSize: '1.3rem', color: \"#34373B\", marginTop: \"10px\" }}}\r\n                autoFocus\r\n                fullWidth/>\r\n            </Grid>\r\n            <Grid item xs={8}>\r\n              <Input onChange={(e) => setPassword(e.target.value)}\r\n                value={password}\r\n                type=\"password\"\r\n                inputProps={{style: { textAlign: 'center',  fontSize: '1.4rem', color: \"#34373B\" }}}\r\n                fullWidth/>\r\n            </Grid>\r\n            <Grid item xs={8} style={{textAlign: 'center'}}>\r\n              {/* 버튼을 누를 때마다 이펙트, 타이머? */}\r\n              <Typography variant=\"overline\">\r\n                {message} &nbsp; \r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={8}>\r\n              <Button type=\"submit\" fullWidth variant=\"outlined\">\r\n                LOGIN\r\n              </Button>\r\n            </Grid>\r\n        </Grid>\r\n      </form>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\" style={{marginTop: 50}}>\r\n      <Paper elevation={5} style={{padding: '1rem'}}>\r\n        <Store.Consumer>\r\n          {store => ( \r\n              <div>\r\n                {store.logged ? \"logout\" : LoginForm()}\r\n              </div>\r\n          )}\r\n        </Store.Consumer>\r\n      </Paper>\r\n    </Container>\r\n  )\r\n}\r\nexport default withRouter(Login)","\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {ip} from \"../../store/ip\"\r\nimport {TextField, Button, Container, Grid} from \"@material-ui/core\";\r\nimport SchoolCheck from \"./schooltest\";\r\nimport Alert from \"../home/Alert\";\r\n\r\nfunction Register() {\r\n  const [alertOption, setAlertOption] = useState({})\r\n  const inputAlert = {open: true, text: \"모든 값을 넣어 주셔야 합니다..\"}\r\n  const registAlert = {open: true, text: \"회원가입에 성공했습니다! 로그인하세요!\", doAfter: () => {window.location.reload()}}\r\n\r\n  const [id, setId] = useState(\"\")\r\n  const [pw, setPw] = useState(\"\")\r\n  const [rpw, setRpw] = useState(\"\")\r\n  const [phone, setPhone] = useState(\"\")\r\n  const [name, setName] = useState(\"\")\r\n  const [birth, setBirth] = useState(\"\")\r\n  const [school, setSchool] = useState(\"\")\r\n  const [address, setAddress] = useState(\"\")\r\n  const [nickName, setNickName] = useState(\"\")\r\n  const [checkRpw, setCheckRpw] = useState(true)\r\n\r\n  // 아이디 저장 함수\r\n  const checkID = (id) => {\r\n    // const idReg = /^[A-za-z0-9]{5,15}$/g\r\n    setId(id)\r\n  };\r\n\r\n  // 패스워드 저장 함수\r\n  const checkPassword = (pw) => {\r\n    // var regExp = /^[a-zA-Z0-9]{5,20}$/;\r\n    if(rpw !== \"\")\r\n      setCheckRpw(rpw === pw)\r\n    setPw(pw)\r\n  };\r\n  // 패스워드 매칭 함수\r\n  const checkRepassword = (rpw) => {\r\n    setCheckRpw(rpw === pw)\r\n    setRpw(rpw)\r\n  };\r\n\r\n  // 전화번호 저장 함수 (서버로 보낼 땐 - 없애기)\r\n  const checkPhoneNumber = (v) => {\r\n    var num = v.replace(/[^0-9]/g, \"\").substring(0,11)\r\n    if(num.length > 3)\r\n      num = num.substring(0,3)+\"-\"+num.substring(3)\r\n    if(num.length > 8)\r\n      num = num.substring(0,8)+\"-\"+num.substring(8)\r\n    setPhone(num)\r\n  }\r\n  const checkBirth = (v) => {\r\n    // 2020-01-01 정규식\r\n    var num = v.replace(/[^0-9]/g, \"\").substring(0,8)\r\n    setBirth(num)\r\n  }\r\n\r\n  /*학교이름,true false 받아오기 */\r\n  const SendSchool = (school) => {\r\n    setSchool(school)\r\n  }\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const newUser = {\r\n      id: id,\r\n      pw: pw,\r\n      name: name,\r\n      nickName: nickName,\r\n      phone: phone.replace(/[^0-9]/g, \"\"),\r\n      address: address,\r\n      birth: birth.replace(/[^0-9]/g, \"\"),\r\n      school: school,\r\n    };\r\n    // 입력이 전부 있는지 체크\r\n    if(!id || !pw || !name || !nickName || !phone || !address || !birth){\r\n      setAlertOption(inputAlert)\r\n      return\r\n    }\r\n  \r\n    // 데이터 입력\r\n    axios.post(ip+\"/users/register\", newUser)\r\n      .then(() => {\r\n        setAlertOption(registAlert)\r\n      })\r\n      .catch(e => {\r\n        console.log(e)\r\n      })\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Alert option={alertOption}/>\r\n      <form noValidate onSubmit={onSubmit}>\r\n        <Grid container spacing={2}>\r\n          {/* 아이디 */}\r\n          <Grid item xs={12}>\r\n            <TextField value={id}\r\n              onChange={(e) => checkID(e.target.value)}\r\n              // onBlur={(e) => onCheckDuplicateID(e)}\r\n              variant=\"outlined\"\r\n              required fullWidth\r\n              label=\"ID\"\r\n            />\r\n          </Grid>\r\n          {/* 비밀번호 */}\r\n          <Grid item xs={6}>\r\n            <TextField\r\n              value={pw}\r\n              onChange={(e) => checkPassword(e.target.value)}\r\n              variant=\"outlined\"\r\n              required fullWidth\r\n              label=\"비밀번호\"\r\n              type=\"password\"\r\n            />\r\n          </Grid>\r\n          {/* 비밀번호 확인 */}\r\n          <Grid item xs={6}>\r\n            <TextField value={rpw} \r\n              onChange={(e) => checkRepassword(e.target.value)}\r\n              variant=\"outlined\"\r\n              required fullWidth\r\n              label=\"비밀번호 확인\"\r\n              type=\"password\"\r\n              error={!checkRpw} helperText={checkRpw ? \"\" : \"비밀번호 불일치\"}\r\n            />\r\n          </Grid>\r\n          {/* 닉네임 */}\r\n          <Grid item xs={12}>\r\n            <TextField value={nickName} \r\n              onChange={(e) => { setNickName(e.target.value)}}\r\n              variant=\"outlined\"\r\n              required\r\n              fullWidth\r\n              label=\"닉네임\"\r\n            />\r\n          </Grid>\r\n          {/* 이름 */}\r\n          <Grid item xs={12}>\r\n            <TextField value={name} \r\n              onChange={(e) => {setName(e.target.value)}}\r\n              variant=\"outlined\"\r\n              required\r\n              fullWidth\r\n              label=\"이름\"\r\n            />\r\n          </Grid>\r\n          {/* 핸드폰 번호 */}\r\n          <Grid item xs={12}>\r\n            <TextField  \r\n              value={phone}\r\n              onChange={(e) => checkPhoneNumber(e.target.value)}\r\n              variant=\"outlined\"\r\n              required\r\n              fullWidth\r\n              label=\"휴대전화 입력\"\r\n            />\r\n          </Grid>\r\n          {/* 생년월일 */}\r\n          <Grid item xs={12}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              value={birth}\r\n              onChange={(e) => { checkBirth(e.target.value)}}\r\n              required\r\n              fullWidth\r\n              label=\"생년월일 입력\"\r\n              placeholder=\"(형식 2020-01-01)\"\r\n              type=\"birth\"\r\n            />\r\n          </Grid>\r\n          {/* 주소 */}\r\n          <Grid item xs={12}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              value={address}\r\n              onChange={(e) => {setAddress(e.target.value)}}\r\n              required\r\n              fullWidth\r\n              label=\"주소 입력\"\r\n              placeholder=\"*(형식:경상북도 구미시 상세주소)\"\r\n              type=\"address\"\r\n            />\r\n          </Grid>\r\n                {/* 학교 인증 */}\r\n          <Grid item xs={12}>\r\n            <SchoolCheck SendSchool={SendSchool}/>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12}>\r\n            <Button style={{height: \"50px\", fontSize: \"15px\"}}\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\">\r\n              가입하기\r\n            </Button>\r\n          </Grid>\r\n        </Grid> \r\n      </form>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default withRouter(Register);","import React, { useState } from \"react\";\r\nimport Store from \"../store/store\"\r\nimport Login from \"../container/user/Login\";\r\nimport Register from \"../container/user/Register\";\r\n\r\nimport { Button, Collapse } from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nfunction FleamarketLogin() {\r\n\r\n  const [open, setOpen] = useState(false)\r\n  \r\n  return (\r\n    <div>\r\n      <Store.Consumer>\r\n        {store => (\r\n            <Login onLogin={store.onLogin}/>\r\n          )}             \r\n      </Store.Consumer>\r\n\r\n      <div style={{textAlign: 'center', margin: '2rem'}}>\r\n        <Button onClick={() => setOpen(!open)}> \r\n          {open ? \"닫기\" : \"회원가입\"} \r\n        </Button>\r\n      </div>\r\n      <Collapse in={open}>\r\n        <Register/>\r\n      </Collapse>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(FleamarketLogin)","import React, { useEffect, useState } from \"react\"\r\nimport { withRouter } from \"react-router-dom\"\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {ip} from \"../../store/ip\"\r\nimport axios from \"axios\"\r\nimport { useSnackbar } from 'notistack';\r\n\r\nimport { Dialog, DialogTitle, Grid, TextField, IconButton } from \"@material-ui/core\";\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport SchoolCheck from \"../user/schooltest\"\r\n\r\nimport defaultProfileImage from \"../../lib/image/profile.png\"\r\n\r\nconst CenterDialog = withStyles((theme) => ({\r\n    root: {\r\n        textAlign : 'center',\r\n        alignItems : 'center',\r\n        fontSize: '10px',\r\n        border:'1px',\r\n        margin:'auto',\r\n    }\r\n}))(Dialog);\r\n\r\nfunction Dialogtest(props) {\r\n    const [Open, setOpen] = useState(false)\r\n\r\n    const id = window.sessionStorage.getItem('id')\r\n    const [nickname, setNickname] = useState(\"\")\r\n    const [name, setName] = useState(\"\")\r\n    const [phone, setPhone] = useState(\"\")\r\n    const [address, setAddress] = useState(\"\")\r\n    const [birth, setBirth] = useState(\"\")\r\n    const [school, setSchool] = useState(\"\")\r\n\r\n    const [deleteValid, setDeleteValid] = useState(false)\r\n\r\n    const { enqueueSnackbar } = useSnackbar()\r\n\r\n    useEffect(() => {\r\n        getUserInfo()\r\n        deleteUserInfoValid()\r\n      }, [])\r\n\r\n    const getUserInfo = () => {\r\n        axios\r\n          .get(ip + \"/mypages/profile\", {\r\n            params: {\r\n              id: id //서버에 전송\r\n            },\r\n          })\r\n          .then((data) => {\r\n            const userData = data.data[0];    //받아옴\r\n            setNickname(userData.nickname)\r\n            setName(userData.name)\r\n            setPhone(userData.phone)\r\n            setAddress(userData.address)\r\n            setBirth(userData.birth)\r\n            setSchool(userData.school)\r\n            \r\n          });\r\n    }\r\n\r\n    const updateUserInfo = () => {\r\n        axios\r\n            .post(ip + \"/mypages/updateinfo\", {\r\n                id : id,\r\n                nickname : nickname,\r\n                address : address,\r\n                school : school,\r\n            })\r\n            .then((res) => {\r\n                window.sessionStorage.setItem('school', school)\r\n                props.refresh()\r\n                enqueueSnackbar('수정되었습니다 !')\r\n            })\r\n            .catch (err => {\r\n                console.log(err)\r\n                enqueueSnackbar('실패하였습니다')\r\n        })\r\n    }\r\n\r\n    const checkDeleteAgain = () => {\r\n        if (window.confirm(\"정말 회원탈퇴를 진행할까요?\"))\r\n            return true\r\n        else return false\r\n    }\r\n\r\n    /* 회원탈퇴가능한지 유효성검사 */\r\n    const deleteUserInfoValid = () => {\r\n        axios\r\n            .get(ip+'/mypages/deleteinfovalid',{\r\n                params :{\r\n                    user_id : id\r\n                }\r\n            })\r\n            .then(data=>{\r\n                const result = data.data[0].count\r\n                if(result!==0) {\r\n                    setDeleteValid(false)}\r\n                else {\r\n                    setDeleteValid(true)}\r\n            })\r\n            .catch(err=>{console.log(err)})\r\n    }\r\n    /* 회원탈퇴 시 내 거래전인 게시물 다 없애며 탈퇴 */\r\n    const deleteUserInfo = () => {\r\n\r\n        if (deleteValid && checkDeleteAgain() ) {\r\n                console.log(\"넘길 아이디 : \"+id)\r\n                deleteUserBoard()   // 상태가 0인 나의 게시물도 전부 삭제하는 함수\r\n                deleteUser()\r\n        }\r\n        else {enqueueSnackbar('회원탈퇴가 불가능합니다.')}\r\n    }\r\n    /* DB에서 유저정보삭제 */\r\n    const deleteUser = () => {\r\n        axios\r\n        .post(ip + \"/mypages/deleteinfo\", {\r\n            id : id\r\n        })\r\n        .then((res) => {\r\n            console.log(res);\r\n            enqueueSnackbar('회원탈퇴 되었습니다.')\r\n            //logout(store)\r\n            //'로그아웃' 후 메인화면으로이동\r\n            props.history.push('/');\r\n        })\r\n        .catch (err => {\r\n            console.log(err)\r\n            enqueueSnackbar('회원탈퇴가 정상적으로 이루어지지 않았습니다.')\r\n        })\r\n    }\r\n    const deleteUserBoard = () => {\r\n        axios\r\n        .post(ip+'/mypages/deleteuserboard', {\r\n            id : id\r\n        })\r\n        .then((res)=>{\r\n            console.log(res);\r\n            enqueueSnackbar(\"내 '거래 전인 게시물'이 모두 삭제되었습니다.\")\r\n        })\r\n        .catch (err => {\r\n            console.log(err)\r\n            enqueueSnackbar(\"내 게시물이 아직 삭제되지 않았습니다.\")\r\n        })\r\n    }\r\n\r\n    const closeAndRefresh = () => {\r\n        setOpen(false)\r\n        window.location.reload()\r\n    }\r\n\r\n    const isNull = (value) => {\r\n        if (!value) return \"아직 없어요 ! :)\"\r\n        else return value\r\n    }\r\n\r\n       /*학교이름,true false 받아오기 */\r\n       const SendSchool = (school) => {\r\n        \r\n        setSchool(school)\r\n        \r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <IconButton variant=\"text\" onClick={() => setOpen(true)}><EditIcon fontSize='large'/></IconButton>\r\n\r\n            <CenterDialog open={Open} onClose={() => setOpen(false)}>\r\n                <DialogTitle>회원 정보 수정</DialogTitle>\r\n                <form>\r\n                    <Grid container spacing={2}>\r\n                        <Grid item xs={12}>\r\n                            <img src={defaultProfileImage} width=\"100\" height=\"100\" alt=\"프로필사진\"/>\r\n                        </Grid>                        \r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"ID\" value={id} disabled readOnly />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"Nickname\" value={nickname} onInput={e => setNickname(e.target.value)}/>\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"Name\" value={name} disabled readOnly />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"Phone Number\" value={phone} disabled readOnly />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"Address\" value={address} onInput={e => setAddress(e.target.value)} />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"Birth\" value={birth} disabled readOnly />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField label=\"School\" value={isNull(school)} disabled readOnly />\r\n                            {school ? null : <SchoolCheck  SendSchool={SendSchool}/>}\r\n                        </Grid>\r\n                    </Grid>\r\n                    <br></br>\r\n                    <div style={{marginBottom: '10px'}}>\r\n                        <IconButton variant=\"text\" onClick={() => updateUserInfo()}><CheckIcon color=\"grey\"/></IconButton>\r\n                        <IconButton variant=\"text\" onClick={() => deleteUserInfo()}><DeleteForeverIcon color=\"grey\"/></IconButton>\r\n                        <IconButton variant=\"text\" onClick={() => closeAndRefresh()}><CloseIcon color=\"grey\"/></IconButton>\r\n                    </div>\r\n                </form>\r\n            </CenterDialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Dialogtest)","import React, { useEffect, useState } from \"react\"\r\nimport { withRouter } from \"react-router-dom\"\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport defaultProfileImage from \"../../lib/image/profile.png\"\r\nimport { ip } from \"../../store/ip\"\r\nimport axios from \"axios\"\r\nimport Dialogtest from \"./dialogtest\"\r\nimport noimg from \"../../lib/image/noimg.png\"\r\n\r\nimport { Table, TableHead, TableBody, TableRow, TableCell, Box, LinearProgress, Typography, Grid, Paper, Tooltip, IconButton } from '@material-ui/core'\r\nimport { ToggleButton, ToggleButtonGroup } from \"@material-ui/lab\"\r\n\r\nimport ShoppingCartOutlinedIcon from '@material-ui/icons/ShoppingCartOutlined';\r\nimport StoreOutlinedIcon from '@material-ui/icons/StoreOutlined';\r\nimport FavoriteOutlinedIcon from '@material-ui/icons/FavoriteOutlined';\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\r\n\r\nconst CenterBox = withStyles((theme) => ({\r\n    root: {\r\n        textAlign: 'center',\r\n        alignItems: 'center',\r\n        border: '2px',\r\n        margin: 'auto',\r\n        padding: '30px',\r\n        width: '60%',\r\n\r\n    },\r\n}))(Box);\r\n\r\nconst CenterTable = withStyles((theme) => ({\r\n    root: {\r\n        textAlign: 'center',\r\n        padding: '50px',\r\n    }\r\n}))(Table);\r\n\r\nconst FlexBox = withStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        border: '2px',\r\n        margin: 'auto',\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n    }\r\n}))(Box)\r\n\r\nconst NavyTypography = withStyles((theme) => ({\r\n    root: {\r\n        color: 'Navy',\r\n    }\r\n}))(Typography)\r\n\r\nconst SizeLinearProgress = withStyles((theme) => ({\r\n    root: {\r\n        height: '20px',\r\n        color: 'pink',\r\n    }\r\n}))(LinearProgress)\r\n\r\nfunction MypageProfile(props) {\r\n\r\n    const id = window.sessionStorage.getItem('id')\r\n    const [nickname, setNickname] = useState(\"\")\r\n    const [level, setLevel] = useState(\"\")\r\n    const [responseRate, setResponseRate] = useState(\"\")\r\n    const [name, setName] = useState(\"\")\r\n    const [phone, setPhone] = useState(\"\")\r\n    const [address, setAddress] = useState(\"\")\r\n    const [birth, setBirth] = useState(\"\")\r\n    const [school, setSchool] = useState(\"\")\r\n\r\n    //mysell 추가\r\n    const [allMysellList, setAllMysellList] = useState([])\r\n    const [mysellvisibility, setMysellvisibility] = useState(\"visible\")\r\n    const [myselldisplay, setMyselldisplay] = useState(\"block\")\r\n\r\n    //mybuy추가\r\n    const [allMybuyList, setAllMybuyList] = useState([])\r\n    const [mybuyvisibility, setMybuyvisibility] = useState(\"hidden\")\r\n    const [mybuydisplay, setMybuydisplay] = useState(\"none\")\r\n\r\n    //mywish 추가\r\n    const [allMywishList, setAllMywishList] = useState([])\r\n    const [mywishvisibility, setMywishvisibility] = useState(\"hidden\")\r\n    const [mywishdisplay, setMywishdisplay] = useState(\"none\")\r\n\r\n    const [menu, setMenu] = useState('sell')\r\n\r\n    useEffect(() => {\r\n        getUserInfo()\r\n        getMysell()\r\n        getMybuy()\r\n        getMywish()\r\n        myLevel()\r\n    }, [])\r\n\r\n    const getUserInfo = () => {\r\n        axios\r\n            .get(ip + \"/mypages/profile\", {\r\n                params: {\r\n                    id: id //서버에 넘긴다 \r\n                },\r\n            })\r\n            .then((data) => {\r\n                const userData = data.data[0];    //받아옴\r\n                \r\n                setNickname(userData.nickname)\r\n                setLevel(userData.level)\r\n                setResponseRate(userData.responseRate)\r\n                setName(userData.name)\r\n                setBirth(userData.birth)\r\n                setAddress(userData.address)\r\n                setPhone(userData.phone)\r\n                setSchool(userData.school)\r\n            });\r\n    }\r\n\r\n    const getMysell = () => {\r\n        axios\r\n            .get(ip + \"/mypages/mysell\", {\r\n                params: {\r\n                    user_id: id //유저아이디 서버에 전송 \r\n                },\r\n            })\r\n            .then((data) => {\r\n\r\n                const list = data.data;    //받아옴\r\n                setAllMysellList(list)\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const getMybuy = () => {\r\n        axios\r\n            .get(ip + \"/mypages/mybuy\", {\r\n                params: {\r\n                    user_id: id //유저아이디로 \r\n                },\r\n            })\r\n            .then((data) => {\r\n                const list = data.data;    //받아옴\r\n                setAllMybuyList(list)\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const getMywish = () => {\r\n        axios\r\n            .get(ip + \"/mypages/mywish\", {\r\n                params: {\r\n                    user_id: id //유저아이디로 \r\n                },\r\n            })\r\n            .then((data) => {\r\n                const list = data.data;    //받아옴\r\n                setAllMywishList(list)\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    //0: 거래전 1:예약중 2: 거래완료\r\n    const boardState = (conState) => {\r\n        if (conState === 0) {\r\n            return \"거래전\"\r\n        }\r\n        else if (conState === 1) {\r\n            return \"예약중\"\r\n        }\r\n        else if (conState === 2) {\r\n            return \"거래완료\"\r\n        }\r\n        else return \"확인불가능\"\r\n    }\r\n\r\n    const displayMysell = () => {\r\n        setMysellvisibility(\"visible\"); setMyselldisplay(\"block\")\r\n        setMybuyvisibility(\"hidden\"); setMybuydisplay(\"none\")\r\n        setMywishvisibility(\"hidden\"); setMywishdisplay(\"none\")\r\n    }\r\n\r\n    const displayMybuy = () => {\r\n        setMysellvisibility(\"hidden\"); setMyselldisplay(\"none\")\r\n        setMybuyvisibility(\"visible\"); setMybuydisplay(\"block\")\r\n        setMywishvisibility(\"hidden\"); setMywishdisplay(\"none\")\r\n    }\r\n\r\n    const displayMywish = () => {\r\n        setMysellvisibility(\"hidden\"); setMyselldisplay(\"none\")\r\n        setMybuyvisibility(\"hidden\"); setMybuydisplay(\"none\")\r\n        setMywishvisibility(\"visible\"); setMywishdisplay(\"block\")\r\n    }\r\n\r\n    const myLevel = (level) => {\r\n        var lv = parseInt(level / 10)\r\n        //console.log(lv)\r\n        if (lv === 0) return \"새내기\";\r\n        else if (lv === 1) return \"1학년\";\r\n        else if (lv === 2) return \"2학년\";\r\n        else if (lv === 3) return \"3학년\";\r\n        else if (lv === 4) return \"4학년\";\r\n        else if (lv === 5) return \"석사\";\r\n        else if (lv === 6) return \"박사\";\r\n        else if (lv === 7) return \"교수\";\r\n        else return \"전문가\";\r\n    }\r\n\r\n    const isNull = (value) => {\r\n        if (!value) return \"아직 없어요 ! :)\"\r\n        else return value\r\n    }\r\n\r\n    const handleMenu = (event, selectedValue) => {\r\n        setMenu(selectedValue);\r\n    };\r\n\r\n    const showPhoneNumber = (value) => {\r\n        if (!value) return \"아직 없어요 ! :)\"\r\n        else {\r\n            return value.substring(0,3)+\"-\"+value.substring(3,7)+\"-\"+value.substring(7,11)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box component=\"div\" padding=\"100px 0 0 0\">\r\n            <CenterBox component=\"div\">\r\n                <Paper>\r\n                    <Grid container spacing={3} style={{ textAlign: \"center\" }}>\r\n                        <Grid item xs={12}>\r\n                            <FlexBox>\r\n                                <NavyTypography variant=\"h4\">{nickname}</NavyTypography>\r\n                                <Typography variant=\"h4\" color=\"textSecondary\">님 반가워요 !</Typography>\r\n                            </FlexBox>\r\n                        </Grid>\r\n                        <br /><br /><br />\r\n                        <Grid item xs={2} style={{ paddingLeft: \"50px\" }}>\r\n                            <img src={defaultProfileImage} width=\"150\" height=\"150\" alt=\"프로필이미지\" />\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2} style={{ paddingLeft: \"40px\" }}>\r\n                            <br /><br />\r\n                            <Box component=\"div\" minWidth={100}>\r\n                                <Typography variant=\"h6\" color=\"textSecondary\">내 응답 온도&nbsp;</Typography>\r\n                            </Box>\r\n                            <br />\r\n                            <Box component=\"div\" minWidth={100}>\r\n                                <Typography variant=\"h6\" color=\"textSecondary\">내 레벨&nbsp;</Typography>\r\n                                <Tooltip title=\"♥레벨 가이드♥&nbsp;&nbsp;&nbsp;&nbsp;새내기 < 1학년 < 2학년 < 3학년 < 4학년 < 석사 < 박사 < 교수 <<< 전문가\" placement=\"bottom\">\r\n                                    <IconButton>\r\n                                        <HelpOutlineIcon/>\r\n                                    </IconButton>\r\n                                </Tooltip>\r\n                            </Box>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={6}>\r\n                            <br /><br />\r\n                            <Box component=\"div\" width=\"100%\">\r\n                                <SizeLinearProgress variant=\"determinate\" value={responseRate} color=\"secondary\"></SizeLinearProgress>\r\n                            </Box>\r\n                            <br /><br />\r\n                            <Box component=\"div\" width=\"100%\">\r\n                                <SizeLinearProgress variant=\"determinate\" value={level} ></SizeLinearProgress>\r\n                            </Box>\r\n                        </Grid>\r\n\r\n                        <Grid item xs={2} style={{paddingRight:\"30px\"}}>\r\n                            <br /><br />\r\n                            <Box component=\"div\" minWidth={100}>\r\n                                <Typography variant=\"h6\" color=\"textSecondary\">&nbsp;{responseRate}℃</Typography>\r\n                            </Box>\r\n                            <br />\r\n                            <Box component=\"div\" minWidth={100}>\r\n                                <Typography variant=\"h6\" color=\"textSecondary\">&nbsp;{myLevel(level)}</Typography>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </CenterBox>\r\n            <CenterBox component=\"div\">\r\n                <Paper>\r\n                    <Grid container spacing={2}>\r\n                        <Grid item xs={2} style={{ paddingLeft: \"50px\" }}>\r\n                            <h1 style={{ color: 'navy' }}>내 정보.</h1>\r\n                        </Grid>\r\n                        <Grid item xs={2} style={{ textAlign: 'right', color: \"grey\" }}>\r\n                            <h3>ID </h3><br />\r\n                            <h3>NAME </h3><br />\r\n                            <h3>BIRTH </h3><br />\r\n                            <h3>PHONE </h3><br />\r\n                            <h3>ADDRESS </h3><br />\r\n                            <h3>SCHOOL </h3><br />\r\n                        </Grid>\r\n                        <Grid item xs={5} style={{ textAlign: 'left', paddingLeft: '50px' }}>\r\n                            <h3>{isNull(id)}</h3><br />\r\n                            <h3>{isNull(name)}</h3><br />\r\n                            <h3>{isNull(birth)}</h3><br />\r\n                            <h3>{showPhoneNumber(phone)}</h3><br />\r\n                            <h3>{isNull(address)}</h3><br />\r\n                            <h3>{isNull(school)}</h3><br />\r\n                        </Grid>\r\n                        <Grid item xs={2} style={{ textAlign: 'right', margin: '10px'}}>\r\n                            {/* {school?null:<div><SchoolCheck  SendSchool={SendSchool}/></div>} */}\r\n                            <Dialogtest refresh={getUserInfo}/> \r\n                        </Grid> \r\n                    </Grid>\r\n                </Paper>\r\n            </CenterBox>\r\n            <CenterBox component=\"div\">\r\n                <Paper elevation={0}>\r\n                    <Box component=\"div\" display=\"block\">\r\n                        <ToggleButtonGroup value={menu} onChange={handleMenu} exclusive >\r\n                            <ToggleButton value=\"sell\" onClick={() => displayMysell()} style={{ width: \"350px\", height: \"150px\", fontSize: \"20px\" }}><StoreOutlinedIcon />&nbsp;&nbsp;내 판매게시글</ToggleButton>\r\n                            <ToggleButton value=\"buy\" onClick={() => displayMybuy()} style={{ width: \"350px\", height: \"150px\", fontSize: \"20px\" }}><ShoppingCartOutlinedIcon />&nbsp;&nbsp;내 구매상품 게시글</ToggleButton>\r\n                            <ToggleButton value=\"wish\" onClick={() => displayMywish()} style={{ width: \"350px\", height: \"150px\", fontSize: \"20px\" }}><FavoriteOutlinedIcon />&nbsp;&nbsp;내 찜목록</ToggleButton>\r\n                        </ToggleButtonGroup>\r\n                    </Box>\r\n                </Paper>\r\n                <Box component=\"div\" minHeight=\"500px\">\r\n                    {/* mysell */}\r\n                    <Box component=\"div\" display={myselldisplay} visibility={mysellvisibility}>\r\n                        <CenterTable stickyHeader>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell width=\"20%\">게시글아이디</TableCell>\r\n                                    <TableCell width=\"20%\">제목</TableCell>\r\n                                    <TableCell width=\"20%\">이미지</TableCell>\r\n                                    <TableCell width=\"20%\">가격</TableCell>\r\n                                    <TableCell width=\"20%\">상태</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {allMysellList ? allMysellList.map((c, index) => (\r\n                                    <TableRow row={c} key={index}>\r\n                                        <TableCell width=\"20%\">{c.id}</TableCell>\r\n                                        <TableCell width=\"20%\">{c.title}</TableCell>\r\n                                        <TableCell width=\"20%\"><img src={c.images === '' ? noimg : c.images} width=\"50px\" height=\"50px\" alt='img' /></TableCell>\r\n                                        <TableCell width=\"20%\">{String(c.price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}</TableCell>\r\n                                        <TableCell width=\"20%\">{boardState(c.state)}</TableCell>\r\n                                    </TableRow>\r\n\r\n                                )) : \"\"}\r\n                            </TableBody>\r\n                        </CenterTable>\r\n                    </Box>\r\n\r\n                    {/* mybuy */}\r\n                    <Box component=\"div\" display={mybuydisplay} visibility={mybuyvisibility}>\r\n                        <CenterTable stickyHeader>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell width=\"20%\">게시글아이디</TableCell>\r\n                                    <TableCell width=\"20%\">제목</TableCell>\r\n                                    <TableCell width=\"20%\">이미지</TableCell>\r\n                                    <TableCell width=\"20%\">가격</TableCell>\r\n                                    <TableCell width=\"20%\">거래일시</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {allMybuyList ? allMybuyList.map((c, index) => (\r\n\r\n                                    <TableRow row={c} key={index}>\r\n                                        <TableCell width=\"20%\">{c.id}</TableCell>\r\n                                        <TableCell width=\"20%\">{c.title}</TableCell>\r\n                                        <TableCell width=\"20%\"><img src={c.images === '' ? noimg : c.images} width=\"50px\" height=\"50px\" alt='img'/></TableCell>\r\n                                        <TableCell width=\"20%\">{String(c.board_price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}</TableCell>\r\n                                        <TableCell width=\"20%\">{c.contractDate}</TableCell>\r\n                                    </TableRow>\r\n\r\n                                )) : \"\"}\r\n                            </TableBody>\r\n                        </CenterTable>\r\n                    </Box>\r\n\r\n                    {/* mywish */}\r\n                    <Box component=\"div\" display={mywishdisplay} visibility={mywishvisibility}>\r\n                        <CenterTable stickyHeader>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell width=\"20%\">게시글아이디</TableCell>\r\n                                    <TableCell width=\"20%\">제목</TableCell>\r\n                                    <TableCell width=\"20%\">이미지</TableCell>\r\n                                    <TableCell width=\"20%\">가격</TableCell>\r\n                                    <TableCell width=\"20%\">상태</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {allMywishList ? allMywishList.map((c, index) => (\r\n\r\n                                    <TableRow row={c} key={index}>\r\n                                        <TableCell width=\"20%\">{c.board_id}</TableCell>\r\n                                        <TableCell width=\"20%\">{c.title}</TableCell>\r\n                                        <TableCell width=\"20%\"><img src={c.images === '' ? noimg : c.images} width=\"50px\" height=\"50px\" alt='img' /></TableCell>\r\n                                        <TableCell width=\"20%\">{String(c.price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}</TableCell>\r\n                                        <TableCell width=\"20%\">{boardState(c.state)}</TableCell>\r\n                                    </TableRow>\r\n\r\n                                )) : \"\"}\r\n                            </TableBody>\r\n                        </CenterTable>\r\n                    </Box>\r\n                </Box>\r\n            </CenterBox>\r\n        </Box>\r\n\r\n    )\r\n}\r\n\r\nexport default withRouter(MypageProfile)","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Profile from \"../container/myPage/profile\"\r\n\r\nfunction FleamarketMypage(props){\r\n\r\n  return (\r\n    <section id=\"main_contents\" style={{marginTop:\"-50px\"}}>\r\n        <Profile/>\r\n    </section>\r\n  )\r\n}\r\nexport default withRouter(FleamarketMypage);","import React, { useEffect, useState } from 'react'\r\nimport { Dialog, DialogContent, DialogContentText, IconButton, Slide } from '@material-ui/core';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\n\r\nfunction Alert(props) {\r\n    const option = props.option\r\n    const [open, setOpen] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setOpen(option.open)\r\n    }, option)\r\n\r\n    const Transition = React.forwardRef(function Transition(props, ref) {\r\n        return <Slide direction=\"up\" ref={ref} {...props} />;\r\n    })\r\n    const doAfter = () => {\r\n        if('doAfter' in option)\r\n            option.doAfter()\r\n        setOpen(false)\r\n    }\r\n    return (\r\n        <div>\r\n            {open ?\r\n                <Dialog open={open} TransitionComponent={Transition} keepMounted>\r\n                    <DialogContent style={{width: \"400px\", textAlign: \"center\"}}>\r\n                        <DialogContentText style={{fontWeight: 'bold'}}>\r\n                            {option.text}\r\n                        </DialogContentText>\r\n                        <IconButton onClick={() => doAfter()}>\r\n                            <DoneIcon/>\r\n                        </IconButton>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Alert","module.exports = __webpack_public_path__ + \"static/media/school2.6a33ea7b.csv\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\r\nconst Store = React.createContext();\r\n\r\nexport default Store;"],"sourceRoot":""}